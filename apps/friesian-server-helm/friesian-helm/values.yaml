# Default values for friesian-serving.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

## Override the deployment namespace
namespaceOverride: ""

## Override the serviceMonitor namespace
# monitorNamespace: monitoring

## define the resource PVC name
resourcePVCName: friesian-serving-resources

init:
  ## enable the init step, include the feature, feature-recall, and recall server
  enabled: true

  ## Image for init steps
  image:
    repository: intelanalytics/friesian-serving
    tag: 2.2.0-SNAPSHOT
    pullPolicy: IfNotPresent
  feature:
    ## Relative path to Parquet files contain users' & items' features.
    ## e.g. If put file in "/resources/feature/feature.parquet" in preparation steps, fill "feature/feature.parquet" here
    resourcePath:
      initialUserDataPath: wnd_user.parquet
      initialItemDataPath: wnd_item.parquet

    ## ref friesian serving doc for more config information
    config:
      userIDColumn: enaging_user_id
      userFeatureColumns: enaging_user_follower_count, enaging_user_following_count, enaging_user_is_verified
      itemIDColumn: tweet_id
      itemFeatureColumns: present_media, language, tweet_type, engaged_with_user_follower_count,engaged_with_user_following_count, len_hashtags, len_domains, len_links, present_media_language, engaged_with_user_is_verified
      ### Redis Configuration
      ## if enable redis in this values.yaml, ignore the following redis configuration
      # default: localhost:6379, if redisType=sentinel, redisUrl will be ignored
      # redisUrl: redis:6379
      # default: standalone, redis server type, can be "standalone", "sentinel", or "cluster"
      # redisType: sentinel
      # default: null, must be provided if redisType=sentinel
      # redisSentinelMasterName: mymaster
      # default: localhost:26379
      # redisSentinelMasterURL: redis:26379
      # default: 256, JedisPoolMaxTotal
      # redisPoolMaxTotal:
      # default: 2, The redis log emit interval in minutes

  featureRecall:
    resourcePath:
      ## Relative path to Parquet files contain users' vectors.
      ## e.g. If put file in "/resources/feature/vec.parquet" in preparation steps, fill "feature/vec.parquet" here
      initialUserDataPath: user_ebd.parquet
    ## ref friesian serving doc for more config information
    config:
      redisKeyPrefix: 2tower_
      userIDColumn: enaging_user_id
      userFeatureColumns: prediction
      ### Redis Configuration
      # default: localhost:6379, if redisType=sentinel, redisUrl will be ignored
      # redisUrl: redis:6379
      # default: standalone, redis server type, can be "standalone", "sentinel", or "cluster"
      # redisType: sentinel
      # default: null, must be provided if redisType=sentinel
      # redisSentinelMasterName: mymaster
      # default: localhost:26379
      # redisSentinelMasterURL: redis:26379
      # default: 256, JedisPoolMaxTotal
      # redisPoolMaxTotal:
      # default: 2, The redis log emit interval in minutes

  recall:
    resourcePath:
      ## Relative path to Parquet files contain items' vectors.
      ## e.g. If put file in "/resources/feature/vec.parquet" in preparation steps, fill "feature/vec.parquet" here
      initialDataPath: item_ebd.parquet
      ## Don't fill the index model output path here, helm will get the value from recall.resourcePath.indexPath.

    ## Ref friesian serving doc for more config information
    config:
      indexDim: 50
      itemIDColumn: tweet_id
      itemEmbeddingColumn: prediction

## Config for feature servers
feature:
  ## Image for feature servers
  image:
    repository: intelanalytics/friesian-serving
    tag: 2.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Define resource requests and limits for single Pods.
  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
  resources:
    requests:
      memory: "2Gi"
      cpu: "2"
    limits:
      memory: "2Gi"
      cpu: "2"

  ## Annotations for feature servers
  annotations: {}

  ## Labels for feature servers
  labels: {}

  ## Number of replicas of feature servers to deploy for a feature deployment.
  replicas: 1

  ## ref friesian serving doc for more config information
  config:
    servicePort: 8082
    monitorPort: 1234
    serviceType: kv
    redisKeyPrefix: ""
    # default: 0, item slot type on redis cluster. 0 means the slot number uses the default value 16384,
    # 1 means all keys save to the same slot, and 2 means useing the last character of the id as the hashtag.
    redisClusterItemSlotType: 0
    # default: null, if serviceType='kv,inference', userFeatureColumns must be provided
    # userFeatureColumns:  enaging_user_follower_count, enaging_user_following_count, enaging_user_is_verified
    # default: null, if serviceType='kv,inference', itemFeatureColumns must be provided
    # itemFeatureColumns: present_media, language, tweet_type, engaged_with_user_follower_count,engaged_with_user_following_count, len_hashtags, len_domains, len_links, present_media_language, engaged_with_user_is_verified
    # default: null, user model path or item model path must be provided if serviceType
    # contains 'inference'. If serviceType=kv, usermodelPath, itemModelPath and modelParallelism
    # will be ignored
    userModelPath: null
    # default: null, user model path or item model path must be provided if serviceType
    # contains 'inference'. If serviceType=kv, usermodelPath, itemModelPath and modelParallelism
    # will be ignored
    itemModelPath: null
    # default: same as the number of cores, number of models used for inference
    # modelParallelism: 2
    ### Redis Configuration
    # default: localhost:6379, if redisType=sentinel, redisUrl will be ignored
    # redisUrl: redis:6379
    # default: standalone, redis server type, can be "standalone", "sentinel", or "cluster"
    # redisType: sentinel
    # default: null, must be provided if redisType=sentinel
    # redisSentinelMasterName: mymaster
    # default: localhost:26379
    # redisSentinelMasterURL: redis:26379
    # default: 256, JedisPoolMaxTotal
    # redisPoolMaxTotal:
    # default: 2, The redis log emit interval in minutes
    logInterval: -1

  ## feature service config
  service:
    clusterIP: ""
    type: ClusterIP

  serviceMonitor:
    ## if true, will create a serviceMonitor for prometheus.
    ## Before setting true, prometheus must be installed or enabled prometheus in the following config
    enabled: false

    ## prometheus scrape interval
    interval: 10s

  ## configurations for choosing the specific nodes
  nodeSelector: {}
  tolerations: []
  affinity: {}

## configuration for feature recall servers (called by recall servers)
featureRecall:
  ## Image for feature recall servers
  image:
    repository: intelanalytics/friesian-serving
    tag: 2.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Define resource requests and limits for single Pods.
  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
  resources:
    requests:
      memory: "2Gi"
      cpu: "1"
    limits:
      memory: "2Gi"
      cpu: "1"

  ## Annotations for feature recall servers
  annotations: {}

  ## Labels for feature recall servers
  labels: {}

  ## Number of replicas of feature recall servers to deploy for a feature recall deployment.
  replicas: 1

  ## ref friesian serving doc for more config information
  config:
    servicePort: 8085
    monitorPort: 1234
    serviceType: kv
    redisKeyPrefix: 2tower_
    # default: 0, item slot type on redis cluster. 0 means the slot number uses the default value 16384,
    # 1 means all keys save to the same slot, and 2 means using the last character of the id as the hash tag.
    # redisClusterItemSlotType: 0
    # default: null, if serviceType='kv,inference', userFeatureColumns must be provided
    # userFeatureColumns: prediction
    # default: null, if serviceType='kv,inference', itemFeatureColumns must be provided
    # itemFeatureColumns: null
    # default: null, user model path or item model path must be provided if serviceType
    # contains 'inference'. If serviceType=kv, usermodelPath, itemModelPath and modelParallelism
    # will be ignored
    # userModelPath: null
    # default: null, user model path or item model path must be provided if serviceType
    # contains 'inference'. If serviceType=kv, usermodelPath, itemModelPath and modelParallelism
    # will be ignored
    # itemModelPath: null
    # default: same as the number of cores, number of models used for inference
    # modelParallelism: 1
    ### Redis Configuration
    # default: if redis enabled, will be the redis server url
    # default: localhost:6379, if redisType=sentinel, redisUrl will be ignored
    # redisUrl: redis:6379
    # default: standalone, redis server type, can be "standalone", "sentinel", or "cluster"
    # redisType:
    # default: null, must be provided if redisType=sentinel
    # redisSentinelMasterName:
    # default: localhost:26379
    # redisSentinelMasterURL:
    # default: 256, JedisPoolMaxTotal
    # redisPoolMaxTotal:
    # default: 2, The redis log emit interval in minutes
    logInterval: -1

  ## feature recall service configuration
  service:
    clusterIP: ""
    type: ClusterIP

  serviceMonitor:
    ## if true, will create a serviceMonitor for prometheus.
    ## Before setting true, prometheus must be installed or enabled prometheus in the following config
    enabled: false

    ## prometheus scrape interval
    interval: 10s

  ## configurations for choosing specific nodes
  nodeSelector: {}
  tolerations: []
  affinity: {}

## Config for recall servers
recall:
  ## Image for recall servers
  image:
    repository: intelanalytics/friesian-serving
    tag: 2.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Define resource requests and limits for single Pods.
  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
  resources:
    requests:
      memory: "2Gi"
      cpu: "2"
    limits:
      memory: "2Gi"
      cpu: "2"
  ## Annotations for recall servers
  annotations: {}
  ## Labels for recall servers
  labels: {}
  ## Number of replicas of recall servers to deploy for a recall deployment.
  replicas: 1
  ## ref friesian serving doc for more config information
  config:
    ######## Recall Service
    servicePort: 8082
    monitorPort: 1234
    # default: 128, the dimensionality of the embedding vectors
    indexDim: 50
    logInterval: -1
  resourcePath:
    ## Relative path to faiss model files, can be generated by recall init step.
    ## If the recall init step is enabled, the model will be output in this path.
    ## e.g. If you want to put the model in "/resources/recall/model.idx" in init step, fill "recall/model.idx" here
    indexPath: item_50.idx

  ## recall service configuration
  service:
    clusterIP: ""
    type: ClusterIP
  serviceMonitor:
    ## if true, will create a serviceMonitor for prometheus.
    ## Before setting true, prometheus must be installed or enabled prometheus in the following config
    enabled: false
    ## prometheus scrape interval
    interval: 10s

  ## configurations for choosing specific nodes
  ## recall servers must be deployed in node support avx512
  nodeSelector: {}
  tolerations: []
  affinity: {}

## configuration for ranking servers
ranking:
  ## Image for ranking servers
  image:
    repository: intelanalytics/friesian-serving
    tag: 2.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Define resource requests and limits for single Pods.
  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
  resources:
    requests:
      memory: "2Gi"
      cpu: "4"
    limits:
      memory: "2Gi"
      cpu: "4"

  ## Annotations for ranking servers
  annotations: {}
  ## Labels for ranking servers
  labels: {}
  ## Number of replicas of ranking servers to deploy for a ranking deployment.
  replicas: 1
  ## ref friesian serving doc for more config information
  config:
    ######## Ranking Service
    servicePort: 8083
    monitorPort: 1234
    # default: null, savedmodel input list if the model is tf savedmodel. If not provided, the inputs
    # of the savedmodel will be arranged in alphabetical order
    savedModelInputs: serving_default_input_1:0, serving_default_input_2:0, serving_default_input_3:0, serving_default_input_4:0, serving_default_input_5:0, serving_default_input_6:0, serving_default_input_7:0, serving_default_input_8:0, serving_default_input_9:0, serving_default_input_10:0, serving_default_input_11:0, serving_default_input_12:0, serving_default_input_13:0
    # default: same as the number of cores, number of models used in inference service
    # modelParallelism: 4
  resourcePath:
    ## Relative path to ranking model, like a two-tower model.
    ## e.g. If you put model in "/resources/ranking/two_tower" in preparation step, fill "ranking/two_tower" here
    modelPath: recsys_wnd

  ## ranking service configuration
  service:
    clusterIP: ""
    type: ClusterIP
  serviceMonitor:
    ## if true, will create a serviceMonitor for prometheus.
    ## Before setting true, prometheus must be installed or enabled prometheus in the following config
    enabled: false
    ## prometheus scrape interval
    interval: 10s

  ## configurations for choosing specific nodes
  nodeSelector: {}
  tolerations: []
  affinity: {}

## Config for recommender servers
recommender:
  ## Image for recommender servers
  image:
    repository: intelanalytics/friesian-serving
    tag: 2.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Define resource requests and limits for single Pods.
  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
  resources:
    requests:
      memory: "2Gi"
      cpu: "6"
    limits:
      memory: "2Gi"
      cpu: "6"

  ## Annotations for recommender servers
  annotations: {}
  ## Labels for recommender servers
  labels: {}
  ## Number of replicas of recommender servers to deploy for a recommender deployment.
  replicas: 1
  ## Ref friesian serving doc for more config information
  config:
    ######## Recommend Service
    servicePort: 8980
    monitorPort: 1234
    # default: null, must be provided, item column name
    itemIDColumn: tweet_id
    # default: null, must be provided, column names for inference, order related.
    inferenceColumns: engaged_with_user_is_verified, enaging_user_is_verified, present_media_language, present_media, tweet_type, language, engaged_with_user_follower_count, engaged_with_user_following_count, enaging_user_follower_count, enaging_user_following_count, len_hashtags, len_domains, len_links
    # default: 0, if set, ranking service requests will be divided
    inferenceBatch: 0

  ## Recommender service configuration
  service:
    clusterIP: ""
    type: ClusterIP
  serviceMonitor:
    ## If true, will create a serviceMonitor for prometheus.
    ## Before setting true, prometheus must be installed or enabled prometheus in the following config
    enabled: false
    ## Prometheus scrape interval
    interval: 10s

  ## Configurations for choosing specific nodes
  nodeSelector: {}
  tolerations: []
  affinity: {}

  # Ingress exposes the recommender server outside the cluster
  ingress:
    # Before setting true, any ingress controller should be installed
    # ref: https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/
    enabled: false

    ## Class Name of installed ingress controller
    className: nginx

    # For Kubernetes >= 1.18 you should specify the ingress-controller via the field ingressClassName
    # See https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/#specifying-the-class-of-an-ingress
    annotations:
      {}
      # kubernetes.io/ingress.class: nginx
      # kubernetes.io/tls-acme: "true"

    hosts:
      ## host to use for ingress rules
      - host: "recommender.example.com"
        paths:
          ## Path to use for ingress rules
          - path: /
            ## For Kubernetes >= 1.18 you should specify the pathType (determines how Ingress paths should be matched)
            ## See https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/#better-path-matching-with-path-types
            pathType: Prefix
      # - host: ""
      #   paths:
      #     - path: /recommender
      #       pathType: Prefix

    ## TLS configuration for recommender Ingress
    ## Secret must be manually created in the namespace
    tls: []
    #  - secretName: chart-example-tls
    #    hosts:
    #      - chart-example.local

## configuration for installing redis helm
redis:
  ## if true, redis will be installed.
  ## redisUrl will be set automatically
  enabled: true

  ## @param global.storageClass Global StorageClass for redis Persistent Volume(s)
  ## @param global.redis.password Global Redis&reg; password (overrides `auth.password`)
  ##
  global:
    storageClass: "managed-nfs-storage"
    redis:
      password: ""
  auth:
    ## @param auth.enabled Enable redis password authentication
    ##
    enabled: false
    ## @param auth.sentinel Enable redis password authentication on sentinels too
    ##
    sentinel: false
  ## @param architecture Redis&reg; architecture. Allowed values: `standalone` or `replication`
  ##
  architecture: replication
  master:
    ## @param master.count Number of Redis&reg; master instances to deploy (experimental, requires additional configuration)
    ##
    count: 1
  replica:
    ## @param replica.replicaCount Number of Redis&reg; replicas to deploy
    ##
    replicaCount: 3
  sentinel:
    ## @param sentinel.enabled Use Redis&reg; Sentinel on Redis&reg; pods.
    ## IMPORTANT: this will disable the master and replicas services and
    ## Create a single Redis&reg; service exposing both the Redis and Sentinel ports
    ##
    enabled: true
    ## @param sentinel.masterSet Master set name
    ##
    masterSet: mymaster
  metrics:
    ## @param metrics.enabled Start a sidecar prometheus exporter to expose Redis&reg; metrics
    ##
    enabled: true
    serviceMonitor:
      ## @param metrics.serviceMonitor.enabled Create ServiceMonitor resource(s) for scraping metrics using PrometheusOperator
      ##
      enabled: false
      # namespace: "monitoring"

## configuration for installing prometheus stack
prometheus:
  ## if true, prometheus stack will be installed.
  enabled: false

  ## Override the deployment namespace
  # namespaceOverride: "monitoring"

  ## Configuration for alertmanager
  ## ref: https://prometheus.io/docs/alerting/alertmanager/
  alertmanager:
    alertmanagerSpec:
      ## Storage is the definition of how storage will be used by the Alertmanager instances.
      ## ref: https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/user-guides/storage.md
      ##
      storage:
        volumeClaimTemplate:
          spec:
            storageClassName: managed-nfs-storage
            accessModes: ["ReadWriteOnce"]
            resources:
              requests:
                storage: 5Gi

  ## Deploy a Prometheus instance
  ##
  prometheus:
    prometheusSpec:
      ## If true, a nil or {} value for prometheus.prometheusSpec.ruleSelector will cause the
      ## prometheus resource to be created with selectors based on values in the helm deployment,
      ## which will also match the PrometheusRule resources created
      ##
      ruleSelectorNilUsesHelmValues: false
      ## If true, a nil or {} value for prometheus.prometheusSpec.serviceMonitorSelector will cause the
      ## prometheus resource to be created with selectors based on values in the helm deployment,
      ## which will also match the servicemonitors created
      serviceMonitorSelectorNilUsesHelmValues: false
      ## If true, a nil or {} value for prometheus.prometheusSpec.podMonitorSelector will cause the
      ## prometheus resource to be created with selectors based on values in the helm deployment,
      ## which will also match the podmonitors created
      podMonitorSelectorNilUsesHelmValues: false
      ## If true, a nil or {} value for prometheus.prometheusSpec.probeSelector will cause the
      ## prometheus resource to be created with selectors based on values in the helm deployment,
      ## which will also match the probes created
      probeSelectorNilUsesHelmValues: false

      ## Prometheus StorageSpec for persistent data
      ## ref: https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/user-guides/storage.md
      ##
      storageSpec:
        ## Using PersistentVolumeClaim
        volumeClaimTemplate:
          spec:
            storageClassName: managed-nfs-storage
            accessModes: ["ReadWriteOnce"]
            resources:
              requests:
                storage: 100Gi
    ingress:
      enabled: false
      # For Kubernetes >= 1.18 you should specify the ingress-controller via the field ingressClassName
      # See https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/#specifying-the-class-of-an-ingress
      ingressClassName: nginx
      ## Hostnames.
      ## Must be provided if Ingress is enabled.
      hosts:
        - prometheus.example.com

      ## Paths to use for ingress rules - one path should match the prometheusSpec.routePrefix
      paths:
        - /

  ## Configuration for thanosRuler
  ## ref: https://thanos.io/tip/components/rule.md/
  thanosRuler:
    ## Deploy thanosRuler
    enabled: false
    thanosRulerSpec:
      ## Storage is the definition of how storage will be used by the ThanosRuler instances.
      ## ref: https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/user-guides/storage.md
      storage:
        volumeClaimTemplate:
          spec:
            storageClassName: managed-nfs-storage
            accessModes: ["ReadWriteOnce"]
            resources:
              requests:
                storage: 5Gi

  kubeEtcd:
    ## Etcd service. If using kubeEtcd.endpoints only the port and targetPort are used
    ##
    service:
      enabled: true
      port: 2381
      targetPort: 2381
      # selector:
      #   component: etcd

  ## Using default values from https://github.com/grafana/helm-charts/blob/main/charts/grafana/values.yaml
  ##
  grafana:
    enabled: true
    ## Enable persistence using Persistent Volume Claims
    ## ref: http://kubernetes.io/docs/user-guide/persistent-volumes/
    ##
    persistence:
      enabled: true
      type: pvc
      storageClassName: managed-nfs-storage
      accessModes:
        - ReadWriteOnce
      size: 10Gi
      # annotations: {}
      # finalizers: null
      # selectorLabels: {}
      ## Sub-directory of the PV to mount. Can be templated.
      # subPath: ""
      ## Name of an existing PVC. Can be templated.
      # existingClaim:

    ingress:
      enabled: false
      # For Kubernetes >= 1.18 you should specify the ingress-controller via the field ingressClassName
      # See https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/#specifying-the-class-of-an-ingress
      ingressClassName: nginx
      hosts:
        - grafana.example.com
      path: /

    ## Configure grafana dashboard providers
    ## ref: http://docs.grafana.org/administration/provisioning/#dashboards
    ##
    ## `path` must be /var/lib/grafana/dashboards/<provider_name>
    ##
    dashboardProviders:
      dashboardproviders.yaml:
        apiVersion: 1
        providers:
          - name: "default"
            folder: "import"
            type: file
            disableDeletion: false
            allowUiUpdates: true
            editable: true
            options:
              path: /var/lib/grafana/dashboards/default

    ## Configure grafana dashboards to import
    ## NOTE: To use dashboards you must also enable/configure dashboardProviders
    ## ref: https://grafana.com/dashboards
    ##
    ## dashboards per provider, use provider name as the key.
    ##
    dashboards:
      default:
        nginx:
          json: |
            {"__inputs":[{"name":"DS_PROMETHEUS","label":"Prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}],"__elements":{},"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"9.1.4"},{"type":"panel","id":"graph","name":"Graph (old)","version":""},{"type":"panel","id":"heatmap","name":"Heatmap","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""},{"type":"panel","id":"table-old","name":"Table (old)","version":""},{"type":"panel","id":"timeseries","name":"Time series","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"enable":true,"expr":"sum(changes(nginx_ingress_controller_config_last_reload_successful_timestamp_seconds{instance!=\"unknown\",controller_class=~\"$controller_class\",namespace=~\"$namespace\"}[30s])) by (controller_class)","hide":false,"iconColor":"rgba(255, 96, 96, 1)","limit":100,"name":"Config Reloads","showIn":0,"step":"30s","tagKeys":"controller_class","tags":[],"titleFormat":"Config Reloaded","type":"tags"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"ops"},"overrides":[]},"id":20,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"round(sum(irate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\"}[2m])), 0.001)","format":"time_series","intervalFactor":1,"refId":"A","step":4}],"title":"Controller Request Volume","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":0},"id":82,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(avg_over_time(nginx_ingress_controller_nginx_process_connections{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",state=\"active\"}[2m]))","format":"time_series","instant":false,"intervalFactor":1,"refId":"A","step":4}],"title":"Controller Connections","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(245, 54, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":95},{"color":"rgba(50, 172, 45, 0.97)","value":99}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":12,"y":0},"id":21,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\",status!~\"[4-5].*\"}[2m])) / sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\"}[2m]))","format":"time_series","intervalFactor":1,"refId":"A","step":4}],"title":"Controller Success Rate (non-4|5xx responses)","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":18,"y":0},"id":81,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"avg(irate(nginx_ingress_controller_success{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[1m])) * 60","format":"time_series","instant":false,"intervalFactor":1,"refId":"A","step":4}],"title":"Config Reloads","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":21,"y":0},"id":83,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"count(nginx_ingress_controller_config_last_reload_successful{controller_pod=~\"$controller\",controller_namespace=~\"$namespace\"} == 0)","format":"time_series","instant":true,"intervalFactor":1,"refId":"A","step":4}],"title":"Last Config Failed","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"editable":true,"error":false,"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":3},"height":"200px","hiddenSeries":false,"id":86,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":false,"hideEmpty":false,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":300,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","repeatDirection":"h","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"round(sum(irate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress), 0.001)","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ ingress }}","metric":"network","refId":"A","step":10}],"thresholds":[],"timeRegions":[],"title":"Ingress Request Volume","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"reqps","logBase":1,"show":true},{"format":"Bps","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"max - istio-proxy":"#890f02","max - master":"#bf1b00","max - prometheus":"#bf1b00"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"editable":false,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":3},"hiddenSeries":false,"id":87,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":false,"hideEmpty":true,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":300,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\",ingress=~\"$ingress\",status!~\"[4-5].*\"}[2m])) by (ingress) / sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress)","format":"time_series","instant":false,"interval":"10s","intervalFactor":1,"legendFormat":"{{ ingress }}","metric":"container_memory_usage:sort_desc","refId":"A","step":10}],"thresholds":[],"timeRegions":[],"title":"Ingress Success Rate (non-4|5xx responses)","tooltip":{"msResolution":false,"shared":true,"sort":1,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"percentunit","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"editable":true,"error":false,"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":6,"w":8,"x":0,"y":10},"height":"200px","hiddenSeries":false,"id":32,"isNew":true,"legend":{"alignAsTable":false,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":false,"sideWidth":200,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (irate (nginx_ingress_controller_request_size_sum{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m]))","format":"time_series","instant":false,"interval":"10s","intervalFactor":1,"legendFormat":"Received","metric":"network","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"- sum (irate (nginx_ingress_controller_response_size_sum{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m]))","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"legendFormat":"Sent","metric":"network","refId":"B","step":10}],"thresholds":[],"timeRegions":[],"title":"Network I/O pressure","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"Bps","logBase":1,"show":true},{"format":"Bps","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"max - istio-proxy":"#890f02","max - master":"#bf1b00","max - prometheus":"#bf1b00"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"editable":false,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":6,"w":8,"x":8,"y":10},"hiddenSeries":false,"id":77,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":false,"sideWidth":200,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"avg(nginx_ingress_controller_nginx_process_resident_memory_bytes{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}) ","format":"time_series","instant":false,"interval":"10s","intervalFactor":1,"legendFormat":"nginx","metric":"container_memory_usage:sort_desc","refId":"A","step":10}],"thresholds":[],"timeRegions":[],"title":"Average Memory Usage","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"max - istio-proxy":"#890f02","max - master":"#bf1b00"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":3,"editable":false,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":6,"w":8,"x":16,"y":10},"height":"","hiddenSeries":false,"id":79,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"avg (rate (nginx_ingress_controller_nginx_process_cpu_seconds_total{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m])) ","format":"time_series","interval":"10s","intervalFactor":1,"legendFormat":"nginx","metric":"container_cpu","refId":"A","step":10}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt"}],"timeRegions":[],"title":"Average CPU Usage","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"cores","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"columns":[],"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"This data is real time, independent of dashboard time range","fontSize":"100%","gridPos":{"h":8,"w":24,"x":0,"y":16},"hideTimeOverride":false,"id":75,"links":[],"pageSize":7,"repeatDirection":"h","scroll":true,"showHeader":true,"sort":{"col":1,"desc":true},"styles":[{"alias":"Ingress","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"ingress","preserveFormat":false,"sanitize":false,"thresholds":[],"type":"string","unit":"short"},{"alias":"Requests","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"Value #A","thresholds":[""],"type":"number","unit":"ops"},{"alias":"Errors","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"Value #B","thresholds":[],"type":"number","unit":"ops"},{"alias":"P50 Latency","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":0,"link":false,"pattern":"Value #C","thresholds":[],"type":"number","unit":"dtdurations"},{"alias":"P90 Latency","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":0,"pattern":"Value #D","thresholds":[],"type":"number","unit":"dtdurations"},{"alias":"P99 Latency","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":0,"pattern":"Value #E","thresholds":[],"type":"number","unit":"dtdurations"},{"alias":"IN","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"Value #F","thresholds":[""],"type":"number","unit":"Bps"},{"alias":"","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"Time","thresholds":[],"type":"hidden","unit":"short"},{"alias":"OUT","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"Value #G","thresholds":[],"type":"number","unit":"Bps"}],"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(0.50, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le, ingress))","format":"table","hide":false,"instant":true,"intervalFactor":1,"legendFormat":"{{ ingress }}","refId":"C"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(0.90, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le, ingress))","format":"table","hide":false,"instant":true,"intervalFactor":1,"legendFormat":"{{ ingress }}","refId":"D"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(0.99, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le, ingress))","format":"table","hide":false,"instant":true,"intervalFactor":1,"legendFormat":"{{ destination_service }}","refId":"E"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(irate(nginx_ingress_controller_request_size_sum{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress)","format":"table","hide":false,"instant":true,"interval":"","intervalFactor":1,"legendFormat":"{{ ingress }}","refId":"F"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(irate(nginx_ingress_controller_response_size_sum{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress)","format":"table","instant":true,"intervalFactor":1,"legendFormat":"{{ ingress }}","refId":"G"}],"title":"Ingress Percentile Response Times and Transfer Rates","transform":"table","type":"table-old"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"s"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":24},"hideTimeOverride":false,"id":91,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"8.3.4","repeatDirection":"h","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"exemplar":true,"expr":"histogram_quantile(0.80, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\",exported_namespace=\"uat\"}[2m])) by (le))","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"P80","refId":"C"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"exemplar":true,"expr":"histogram_quantile(0.90, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\",exported_namespace=\"uat\"}[2m])) by (le))","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"P90","refId":"D"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","exemplar":true,"expr":"histogram_quantile(0.99, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\",exported_namespace=\"uat\"}[2m])) by (le))","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"P99","refId":"E"}],"title":"Ingress Percentile Response Times","type":"timeseries"},{"cards":{},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateWarm","exponent":0.5,"mode":"spectrum"},"dataFormat":"tsbuckets","datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"","gridPos":{"h":7,"w":12,"x":12,"y":24},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":89,"legend":{"show":true},"reverseYBuckets":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"exemplar":true,"expr":"sum(increase(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\",exported_namespace=\"uat\"}[2m])) by (le)","format":"heatmap","interval":"","legendFormat":"{{le}}","refId":"A"}],"title":"Ingress Request Latency Heatmap","tooltip":{"show":true,"showHistogram":true},"type":"heatmap","xAxis":{"show":true},"yAxis":{"format":"s","logBase":1,"show":true},"yBucketBound":"auto"},{"columns":[{"text":"Current","value":"current"}],"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fontSize":"100%","gridPos":{"h":8,"w":24,"x":0,"y":31},"height":"1024","id":85,"links":[],"pageSize":7,"scroll":true,"showHeader":true,"sort":{"col":1,"desc":false},"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"date"},{"alias":"TTL","align":"auto","colorMode":"cell","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":0,"pattern":"Current","thresholds":["0","691200"],"type":"number","unit":"s"},{"alias":"","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"/.*/","thresholds":[],"type":"number","unit":"short"}],"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"avg(nginx_ingress_controller_ssl_expire_time_seconds{kubernetes_pod_name=~\"$controller\",namespace=~\"$namespace\",ingress=~\"$ingress\"}) by (host) - time()","format":"time_series","intervalFactor":1,"legendFormat":"{{ host }}","metric":"gke_letsencrypt_cert_expiration","refId":"A","step":1}],"title":"Ingress Certificate Expiry","transform":"timeseries_aggregations","type":"table-old"}],"refresh":"5s","schemaVersion":37,"style":"dark","tags":["nginx"],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"hide":0,"includeAll":false,"label":"datasource","multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"label":"Namespace","multi":false,"name":"namespace","options":[],"query":{"query":"label_values(nginx_ingress_controller_config_hash, controller_namespace)","refId":"prometheus-namespace-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"label":"Controller Class","multi":false,"name":"controller_class","options":[],"query":{"query":"label_values(nginx_ingress_controller_config_hash{namespace=~\"$namespace\"}, controller_class) ","refId":"prometheus-controller_class-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"label":"Controller","multi":false,"name":"controller","options":[],"query":{"query":"label_values(nginx_ingress_controller_config_hash{namespace=~\"$namespace\",controller_class=~\"$controller_class\"}, controller_pod) ","refId":"prometheus-controller-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"label":"Ingress","multi":false,"name":"ingress","options":[],"query":{"query":"label_values(nginx_ingress_controller_requests{namespace=~\"$namespace\",controller_class=~\"$controller_class\",controller_pod=~\"$controller\"}, ingress) ","refId":"prometheus-ingress-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":2,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","2m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"NGINX Ingress controller","uid":"nginx","version":1,"weekStart":""}

        redis:
          json: |
            {"__inputs":[{"name":"DS_PROMETHEUS","label":"Prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}],"__elements":{},"__requires":[{"type":"panel","id":"gauge","name":"Gauge","version":""},{"type":"grafana","id":"grafana","name":"Grafana","version":"9.1.4"},{"type":"panel","id":"graph","name":"Graph (old)","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Redis Dashboard for Prometheus Redis Exporter 1.x, it works with helm stable/redis-ha exporter.\r\n\r\nIf you missing redis memory utilization, please modify \"maxmemory\" value in values.yaml","editable":true,"fiscalYearStartMonth":0,"gnetId":11835,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"s"},"overrides":[]},"gridPos":{"h":7,"w":2,"x":0,"y":0},"id":9,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"max(max_over_time(redis_uptime_in_seconds{instance=~\"$instance\"}[$__interval]))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"","metric":"","refId":"A","step":1800}],"title":"Uptime","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":2,"x":2,"y":0},"hideTimeOverride":true,"id":12,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"redis_connected_clients{instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"","metric":"","refId":"A","step":2}],"timeFrom":"1m","title":"Clients","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":80},{"color":"rgba(245, 54, 54, 0.9)","value":95}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":7,"w":4,"x":4,"y":0},"hideTimeOverride":true,"id":11,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"100 * (redis_memory_used_bytes{instance=~\"$instance\"}  / redis_memory_max_bytes{instance=~\"$instance\"} )","format":"time_series","intervalFactor":2,"legendFormat":"","metric":"","refId":"A","step":2}],"timeFrom":"1m","title":"Memory Usage","type":"gauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editable":true,"error":false,"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":8,"y":0},"hiddenSeries":false,"id":2,"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"rate(redis_commands_processed_total{instance=~\"$instance\"}[1m])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"","metric":"A","refId":"A","step":240,"target":""}],"thresholds":[],"timeRegions":[],"title":"Commands Executed / sec","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"editable":true,"error":false,"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":16,"y":0},"hiddenSeries":false,"id":1,"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":true,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(redis_keyspace_hits_total{instance=~\"$instance\"}[5m])","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"hits","metric":"","refId":"A","step":240,"target":""},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(redis_keyspace_misses_total{instance=~\"$instance\"}[5m])","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"misses","metric":"","refId":"B","step":240,"target":""}],"thresholds":[],"timeRegions":[],"title":"Hits / Misses per Sec","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"","logBase":1,"min":0,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{"max":"#BF1B00"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editable":true,"error":false,"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":7},"hiddenSeries":false,"id":7,"isNew":true,"legend":{"avg":false,"current":false,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"redis_memory_used_bytes{instance=~\"$instance\"} ","format":"time_series","intervalFactor":2,"legendFormat":"used","metric":"","refId":"A","step":240,"target":""},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"redis_memory_max_bytes{instance=~\"$instance\"} ","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"max","refId":"B","step":240}],"thresholds":[],"timeRegions":[],"title":"Total Memory Usage","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"min":0,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editable":true,"error":false,"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":7},"hiddenSeries":false,"id":10,"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"rate(redis_net_input_bytes_total{instance=~\"$instance\"}[5m])","format":"time_series","intervalFactor":2,"legendFormat":"{{ input }}","refId":"A","step":240},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"rate(redis_net_output_bytes_total{instance=~\"$instance\"}[5m])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{ output }}","refId":"B","step":240}],"thresholds":[],"timeRegions":[],"title":"Network I/O","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editable":true,"error":false,"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":7,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":14},"hiddenSeries":false,"id":5,"isNew":true,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (redis_db_keys{instance=~\"$instance\"}) by (db)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{ db }} ","refId":"A","step":240,"target":""}],"thresholds":[],"timeRegions":[],"title":"Total Items per DB","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editable":true,"error":false,"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":7,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":14},"hiddenSeries":false,"id":13,"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (redis_db_keys{instance=~\"$instance\"}) - sum (redis_db_keys_expiring{instance=~\"$instance\"}) ","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"not expiring","refId":"A","step":240,"target":""},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (redis_db_keys_expiring{instance=~\"$instance\"}) ","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"expiring","metric":"","refId":"B","step":240}],"thresholds":[],"timeRegions":[],"title":"Expiring vs Not-Expiring Keys","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{"evicts":"#890F02","memcached_items_evicted_total{instance=\"172.17.0.1:9150\",job=\"prometheus\"}":"#890F02","reclaims":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editable":true,"error":false,"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":21},"hiddenSeries":false,"id":8,"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"reclaims","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(redis_expired_keys_total{instance=~\"$instance\"}[5m])) by (instance)","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"expired","metric":"","refId":"A","step":240,"target":""},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(redis_evicted_keys_total{instance=~\"$instance\"}[5m])) by (instance)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"evicted","refId":"B","step":240}],"thresholds":[],"timeRegions":[],"title":"Expired / Evicted","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editable":true,"error":false,"fill":8,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":21},"hiddenSeries":false,"id":14,"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"topk(5, irate(redis_commands_total{instance=~\"$instance\"} [1m]))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{ cmd }}","metric":"redis_command_calls_total","refId":"A","step":240}],"thresholds":[],"timeRegions":[],"title":"Command Calls / sec","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":28},"hiddenSeries":false,"id":16,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"redis_connected_clients{instance=\"$instance\"}","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Redis connected clients","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"refresh":"30s","schemaVersion":37,"style":"dark","tags":["prometheus","redis"],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"hide":0,"includeAll":false,"label":"Prometheus","multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"current":{},"datasource":{"type":"prometheus","uid":"$DS_PROMETHEUS"},"definition":"label_values(redis_up, namespace)","hide":0,"includeAll":false,"label":"Namespace","multi":false,"name":"namespace","options":[],"query":{"query":"label_values(redis_up, namespace)","refId":"Prometheus-namespace-Variable-Query"},"refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{},"datasource":{"type":"prometheus","uid":"$DS_PROMETHEUS"},"definition":"label_values(redis_up{namespace=\"$namespace\"}, pod)","hide":0,"includeAll":false,"label":"Pod Name","multi":false,"name":"pod_name","options":[],"query":{"query":"label_values(redis_up{namespace=\"$namespace\"}, pod)","refId":"Prometheus-pod_name-Variable-Query"},"refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{},"datasource":{"type":"prometheus","uid":"$DS_PROMETHEUS"},"definition":"label_values(redis_up{namespace=\"$namespace\", pod=\"$pod_name\"}, instance)","hide":0,"includeAll":false,"multi":false,"name":"instance","options":[],"query":{"query":"label_values(redis_up{namespace=\"$namespace\", pod=\"$pod_name\"}, instance)","refId":"Prometheus-instance-Variable-Query"},"refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-24h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Redis Dashboard for Prometheus Redis Exporter (helm stable/redis-ha)","uid":"xDLNRKUWz","version":1,"weekStart":""}

        request-handling-performance:
          json: |
            {"__inputs":[{"name":"DS_PROMETHEUS","label":"Prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}],"__elements":{},"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"9.1.4"},{"type":"panel","id":"graph","name":"Graph (old)","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"","editable":true,"fiscalYearStartMonth":0,"gnetId":9614,"graphTooltip":1,"id":null,"links":[],"liveNow":false,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Total time for NGINX and upstream servers to process a request and send a response","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":0},"hiddenSeries":false,"id":91,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(\n  0.5,\n  sum by (le)(\n    rate(\n      nginx_ingress_controller_request_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".5","refId":"D"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(\n  0.95,\n  sum by (le)(\n    rate(\n    nginx_ingress_controller_request_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".95","refId":"B"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(\n  0.99,\n  sum by (le)(\n    rate(\n      nginx_ingress_controller_request_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".99","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Request Latency Percentiles","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The time spent on receiving the response from the upstream server","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":0},"hiddenSeries":false,"id":94,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(\n  0.5,\n  sum by (le)(\n    rate(\n      nginx_ingress_controller_response_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","instant":false,"interval":"","intervalFactor":1,"legendFormat":".5","refId":"D"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(\n  0.95,\n  sum by (le)(\n    rate(\n    nginx_ingress_controller_response_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".95","refId":"B"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(\n  0.99,\n  sum by (le)(\n    rate(\n      nginx_ingress_controller_response_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".99","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Upstream Response Latency Percentiles","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":8},"hiddenSeries":false,"id":93,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"  sum by (method, host, path)(\n    rate(\n      nginx_ingress_controller_request_duration_seconds_count{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Request Rate by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"reqps","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"For each path observed, its median upstream response time","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":8},"hiddenSeries":false,"id":98,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(\n  .5,\n  sum by (le, method, host, path)(\n    rate(\n      nginx_ingress_controller_response_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Median Upstream Response Time by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Percentage of 4xx and 5xx responses among all responses.","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":16},"hiddenSeries":false,"id":100,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (method, host, path) (rate(nginx_ingress_controller_request_duration_seconds_count{\n  ingress =~ \"$ingress\",\n  status =~ \"[4-5].*\"\n}[5m])) / sum by (method, host, path) (rate(nginx_ingress_controller_request_duration_seconds_count{\n  ingress =~ \"$ingress\",\n}[5m]))","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Response Error Rate by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"percentunit","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"For each path observed, the sum of upstream request time","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":16},"hiddenSeries":false,"id":102,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (method, host, path) (rate(nginx_ingress_controller_response_duration_seconds_sum{ingress =~ \"$ingress\"}[5m]))","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Upstream Response Time by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":24},"hiddenSeries":false,"id":101,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"  sum (\n    rate(\n      nginx_ingress_controller_request_duration_seconds_count{\n        ingress =~ \"$ingress\",\n        status =~\"[4-5].*\",\n      }[5m]\n    )\n  ) by(method, host, path, status)\n","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }} {{ status }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Response Error Rate by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"reqps","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":24},"hiddenSeries":false,"id":99,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (\n  rate (\n      nginx_ingress_controller_response_size_sum {\n        ingress =~ \"$ingress\",\n      }[5m]\n  )\n)  by (method, host, path) / sum (\n  rate(\n      nginx_ingress_controller_response_size_count {\n        ingress =~ \"$ingress\",\n      }[5m]\n  )\n) by (method, host, path)\n","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"D"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"    sum (rate(nginx_ingress_controller_response_size_bucket{\n        ingress =~ \"$ingress\",\n    }[5m])) by (le)\n","hide":true,"legendFormat":"{{le}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Average Response Size by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"decbytes","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":32},"hiddenSeries":false,"id":96,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (\n  rate(\n      nginx_ingress_controller_ingress_upstream_latency_seconds_sum {\n        ingress =~ \"$ingress\",\n      }[5m]\n)) / sum (\n  rate(\n      nginx_ingress_controller_ingress_upstream_latency_seconds_count {\n        ingress =~ \"$ingress\",\n      }[5m]\n  )\n)\n","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"average","refId":"B"}],"thresholds":[],"timeRegions":[],"title":"Upstream Service Latency","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"refresh":"30s","schemaVersion":37,"style":"dark","tags":["nginx"],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"hide":0,"includeAll":false,"label":"datasource","multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"label_values(nginx_ingress_controller_requests, ingress) ","hide":0,"includeAll":true,"label":"Service Ingress","multi":false,"name":"ingress","options":[],"query":{"query":"label_values(nginx_ingress_controller_requests, ingress) ","refId":"Prometheus-ingress-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":2,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-15m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","2m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Request Handling Performance","uid":"4GFbkOsZk","version":1,"weekStart":""}

        cluster:
          json: |
            {"__inputs":[{"name":"DS_PROMETHEUS","label":"Prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}],"__elements":{},"__requires":[{"type":"panel","id":"gauge","name":"Gauge","version":""},{"type":"grafana","id":"grafana","name":"Grafana","version":"9.1.4"},{"type":"panel","id":"graph","name":"Graph (old)","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""},{"type":"panel","id":"timeseries","name":"Time series","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Monitors Kubernetes cluster using Prometheus. Shows overall cluster CPU / Memory / Filesystem usage as well as individual pod, containers, systemd services statistics. Uses cAdvisor metrics only.","editable":true,"fiscalYearStartMonth":0,"gnetId":315,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":33,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Network I/O pressure","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"Bps"},"overrides":[]},"gridPos":{"h":6,"w":24,"x":0,"y":1},"id":32,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"list","placement":"bottom","showLegend":false,"width":200},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_network_receive_bytes_total{node=~\"^$Node$\"}[$__interval]))","interval":"","intervalFactor":1,"legendFormat":"Received","metric":"network","range":true,"refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"- sum (rate (container_network_transmit_bytes_total{node=~\"^$Node$\"}[$__interval]))","interval":"","intervalFactor":1,"legendFormat":"Sent","metric":"network","range":true,"refId":"B","step":10}],"title":"Network I/O pressure","type":"timeseries"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":7},"id":34,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Total usage","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":65},{"color":"rgba(245, 54, 54, 0.9)","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":8,"x":0,"y":8},"id":4,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum(container_memory_working_set_bytes{node=~\"^$Node$\"}) / sum(machine_memory_bytes{node=~\"^$Node$\"}) * 100","interval":"","intervalFactor":1,"range":true,"refId":"A","step":10}],"title":"Cluster memory usage","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":65},{"color":"rgba(245, 54, 54, 0.9)","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":8,"x":8,"y":8},"id":6,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_cpu_usage_seconds_total{node=~\"^$Node$\"}[$__interval])) / sum (machine_cpu_cores{node=~\"^$Node$\"}) * 100","interval":"","intervalFactor":1,"range":true,"refId":"A","step":10}],"title":"Cluster CPU usage","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":65},{"color":"rgba(245, 54, 54, 0.9)","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":8,"x":16,"y":8},"id":7,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (container_fs_usage_bytes{node=~\"^$Node$\"}) / sum (container_fs_limit_bytes{node=~\"^$Node$\"}) * 100","interval":"","intervalFactor":1,"legendFormat":"","metric":"","range":true,"refId":"A","step":10}],"title":"Cluster filesystem usage","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":0,"y":13},"id":9,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (container_memory_working_set_bytes{node=~\"^$Node$\"})","interval":"10s","intervalFactor":1,"refId":"A","step":10}],"title":"Used","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":4,"y":13},"id":10,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (machine_memory_bytes{node=~\"^$Node$\"})","interval":"","intervalFactor":1,"range":true,"refId":"A","step":10}],"title":"Total","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":8,"y":13},"id":11,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_cpu_usage_seconds_total{node=~\"^$Node$\"}[$__interval]))","interval":"","intervalFactor":1,"range":true,"refId":"A","step":10}],"title":"Used","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":12,"y":13},"id":12,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (machine_cpu_cores{node=~\"^$Node$\"})","interval":"","intervalFactor":1,"range":true,"refId":"A","step":10}],"title":"Total","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":16,"y":13},"id":13,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (container_fs_usage_bytes{node=~\"^$Node$\"})","interval":"","intervalFactor":1,"range":true,"refId":"A","step":10}],"title":"Used","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":20,"y":13},"id":14,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (container_fs_limit_bytes{node=~\"^$Node$\"})","interval":"","intervalFactor":1,"range":true,"refId":"A","step":10}],"title":"Total","type":"stat"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":16},"id":35,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Pods CPU usage","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"cores","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":24,"x":0,"y":17},"id":17,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_cpu_usage_seconds_total{image!=\"\",name=~\"^k8s_.*\",node=~\"^$Node$\"}[$__interval])) by (node)","interval":"","intervalFactor":1,"legendFormat":"__auto","metric":"container_cpu","range":true,"refId":"A","step":10}],"title":"Pods CPU usage","type":"timeseries"},{"collapsed":true,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":24},"id":36,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":3,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":24,"x":0,"y":25},"height":"","hiddenSeries":false,"id":23,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_cpu_usage_seconds_total{systemd_service_name!=\"\",node=~\"^$Node$\"}[1m])) by (systemd_service_name)","hide":false,"interval":"","intervalFactor":1,"legendFormat":"{{ systemd_service_name }}","metric":"container_cpu","range":true,"refId":"A","step":10}],"thresholds":[],"timeRegions":[],"title":"System services CPU usage","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1803","format":"none","label":"cores","logBase":1,"show":true},{"$$hashKey":"object:1804","format":"short","logBase":1,"show":false}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"System services CPU usage","type":"row"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":25},"id":37,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Containers CPU usage","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"cores","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":24,"x":0,"y":26},"id":24,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"right","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_cpu_usage_seconds_total{image!=\"\",name=~\"^k8s_.*\",container!=\"POD\",node=~\"^$Node$\"}[$__interval])) by (container, pod)","hide":false,"interval":"","intervalFactor":1,"legendFormat":"{{container}} | {{pod}}","metric":"container_cpu","range":true,"refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_cpu_usage_seconds_total{image!=\"\",name!~\"^k8s_.*\",node=~\"^$Node$\"}[$__interval])) by (node, name, image)","hide":false,"interval":"","intervalFactor":1,"legendFormat":"docker: {{ node }} | {{ image }} ({{ name }})","metric":"container_cpu","range":true,"refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_cpu_usage_seconds_total{rkt_container_name!=\"\",node=~\"^$Node$\"}[$__interval])) by (node, rkt_container_name)","interval":"","intervalFactor":1,"legendFormat":"rkt: {{ node }} | {{ rkt_container_name }}","metric":"container_cpu","range":true,"refId":"C","step":10}],"title":"Containers CPU usage","type":"timeseries"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":33},"id":38,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"All processes CPU usage","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":14,"w":24,"x":0,"y":34},"id":20,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_cpu_usage_seconds_total{node=~\"^$Node$\"}[$__interval])) by (id)","hide":false,"interval":"","intervalFactor":1,"legendFormat":"{{ id }}","metric":"container_cpu","range":true,"refId":"A","step":10}],"title":"All processes CPU usage","type":"timeseries"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":48},"id":39,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Pods memory usage","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":7,"w":24,"x":0,"y":49},"id":25,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"right","showLegend":true,"width":200},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\",node=~\"^$Node$\"}) by (pod)","interval":"","intervalFactor":1,"legendFormat":"__auto","metric":"container_memory_usage:sort_desc","range":true,"refId":"A","step":10}],"title":"Pods memory usage","type":"timeseries"},{"collapsed":true,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":56},"id":40,"panels":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":7,"w":24,"x":0,"y":57},"id":26,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"right","showLegend":true,"width":200},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (container_memory_working_set_bytes{systemd_service_name!=\"\",node=~\"^$Node$\"}) by (systemd_service_name)","interval":"","intervalFactor":1,"legendFormat":"{{ systemd_service_name }}","metric":"container_memory_usage:sort_desc","range":true,"refId":"A","step":10}],"title":"System services memory usage","type":"timeseries"}],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"System services memory usage","type":"row"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":57},"id":41,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Containers memory usage","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":7,"w":24,"x":0,"y":58},"id":27,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"right","showLegend":true,"width":200},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\",container!=\"POD\",node=~\"^$Node$\"}) by (container, pod)","interval":"","intervalFactor":1,"legendFormat":"{{ pod }} | {{ container }}","metric":"container_memory_usage:sort_desc","range":true,"refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (container_memory_working_set_bytes{image!=\"\",name!~\"^k8s_.*\",node=~\"^$Node$\"}) by (node, name, image)","interval":"","intervalFactor":1,"legendFormat":"docker: {{ node }} | {{ image }} ({{ name }})","metric":"container_memory_usage:sort_desc","range":true,"refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (container_memory_working_set_bytes{rkt_container_name!=\"\",node=~\"^$Node$\"}) by (node, rkt_container_name)","interval":"","intervalFactor":1,"legendFormat":"rkt: {{ node }} | {{ rkt_container_name }}","metric":"container_memory_usage:sort_desc","range":true,"refId":"C","step":10}],"title":"Containers memory usage","type":"timeseries"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":65},"id":42,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"All processes memory usage","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":14,"w":24,"x":0,"y":66},"id":28,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"bottom","showLegend":true,"width":200},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (container_memory_working_set_bytes{id!=\"/\",node=~\"^$Node$\"}) by (id)","interval":"","intervalFactor":1,"legendFormat":"{{ id }}","metric":"container_memory_usage:sort_desc","range":true,"refId":"A","step":10}],"title":"All processes memory usage","type":"timeseries"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":80},"id":43,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Pods network I/O","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"Bps"},"overrides":[]},"gridPos":{"h":7,"w":24,"x":0,"y":81},"id":16,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"right","showLegend":true,"width":200},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_network_receive_bytes_total{image!=\"\",name=~\"^k8s_.*\",node=~\"^$Node$\"}[$__interval])) by (pod)","interval":"","intervalFactor":1,"legendFormat":"-> {{ pod}}","metric":"network","range":true,"refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"- sum (rate (container_network_transmit_bytes_total{image!=\"\",name=~\"^k8s_.*\",node=~\"^$Node$\"}[$__interval])) by (pod)","interval":"","intervalFactor":1,"legendFormat":"<- {{ pod}}","metric":"network","range":true,"refId":"B","step":10}],"title":"Pods network I/O","type":"timeseries"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":88},"id":44,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Containers network I/O","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"Bps"},"overrides":[]},"gridPos":{"h":7,"w":24,"x":0,"y":89},"id":30,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"right","showLegend":true,"width":200},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_network_receive_bytes_total{image!=\"\",name=~\"^k8s_.*\",node=~\"^$Node$\"}[$__interval])) by (container, pod)","hide":false,"interval":"","intervalFactor":1,"legendFormat":"-> {{ container}} | {{ pod}}","metric":"network","range":true,"refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"- sum (rate (container_network_transmit_bytes_total{image!=\"\",name=~\"^k8s_.*\",node=~\"^$Node$\"}[$__interval])) by (container, pod)","hide":false,"interval":"","intervalFactor":1,"legendFormat":"<- {{ container}} | {{ pod}}","metric":"network","range":true,"refId":"D","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (rate (container_network_receive_bytes_total{image!=\"\",name!~\"^k8s_.*\",node=~\"^$Node$\"}[1m])) by (node, name, image)","hide":false,"interval":"10s","intervalFactor":1,"legendFormat":"-> docker: {{ node }} | {{ image }} ({{ name }})","metric":"network","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"- sum (rate (container_network_transmit_bytes_total{image!=\"\",name!~\"^k8s_.*\",node=~\"^$Node$\"}[1m])) by (node, name, image)","hide":false,"interval":"10s","intervalFactor":1,"legendFormat":"<- docker: {{ node }} | {{ image }} ({{ name }})","metric":"network","refId":"C","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (rate (container_network_transmit_bytes_total{rkt_container_name!=\"\",node=~\"^$Node$\"}[1m])) by (node, rkt_container_name)","hide":false,"interval":"10s","intervalFactor":1,"legendFormat":"-> rkt: {{ node }} | {{ rkt_container_name }}","metric":"network","refId":"E","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"- sum (rate (container_network_transmit_bytes_total{rkt_container_name!=\"\",node=~\"^$Node$\"}[1m])) by (node, rkt_container_name)","hide":false,"interval":"10s","intervalFactor":1,"legendFormat":"<- rkt: {{ node }} | {{ rkt_container_name }}","metric":"network","refId":"F","step":10}],"title":"Containers network I/O","type":"timeseries"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":96},"id":45,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"All processes network I/O","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"Bps"},"overrides":[]},"gridPos":{"h":14,"w":24,"x":0,"y":97},"id":29,"links":[],"options":{"legend":{"calcs":["mean","lastNotNull"],"displayMode":"table","placement":"bottom","showLegend":true,"width":200},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum (rate (container_network_receive_bytes_total{id!=\"/\",node=~\"^$Node$\"}[$__interval])) by (id)","interval":"","intervalFactor":1,"legendFormat":"-> {{ id }}","metric":"network","range":true,"refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"- sum (rate (container_network_transmit_bytes_total{id!=\"/\",node=~\"^$Node$\"}[$__interval])) by (id)","interval":"","intervalFactor":1,"legendFormat":"<- {{ id }}","metric":"network","range":true,"refId":"B","step":10}],"title":"All processes network I/O","type":"timeseries"}],"refresh":"10s","schemaVersion":37,"style":"dark","tags":["kubernetes"],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"description":"Prometheus","hide":0,"includeAll":false,"multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"label_values(container_network_receive_bytes_total,node)","hide":0,"includeAll":true,"multi":false,"name":"Node","options":[],"query":{"query":"label_values(container_network_receive_bytes_total,node)","refId":"StandardVariableQuery"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Kubernetes resources usage monitoring (via Prometheus)","uid":"hST-fvZVz","version":3,"weekStart":""}

        grpc:
          json: |
            {"__inputs":[{"name":"DS_PROMETHEUS","label":"Prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}],"__elements":{},"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"9.1.4"},{"type":"panel","id":"graph","name":"Graph (old)","version":""},{"type":"panel","id":"heatmap","name":"Heatmap","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""},{"type":"panel","id":"timeseries","name":"Time series","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Dashboard for monitoring gRPC metrics which made by repo https://github.com/grpc-ecosystem/go-grpc-prometheus","editable":true,"fiscalYearStartMonth":0,"gnetId":9186,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":22,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Global","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"ops"},"overrides":[]},"gridPos":{"h":5,"w":8,"x":0,"y":1},"id":14,"links":[],"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum(rate(grpc_server_started_total{job=\"$job\"}[$__interval]))","format":"time_series","intervalFactor":1,"legendFormat":"__auto","range":true,"refId":"A"}],"title":"QPS","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":95},{"color":"#d44a3a","value":99}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":5,"w":8,"x":8,"y":1},"id":12,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(grpc_server_handled_total{job=\"$job\",grpc_type=\"UNARY\",grpc_code=\"OK\"}[$__interval]))\n/ \nsum(rate(grpc_server_started_total{job=\"$job\",grpc_type=\"UNARY\"}[$__interval]))","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Global Success Rate","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.5},{"color":"#d44a3a","value":1}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":5,"w":8,"x":16,"y":1},"id":15,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(grpc_server_handled_total{job=\"$job\",grpc_type=\"UNARY\",grpc_code=\"Internal\"}[$__interval]))\n/ \nsum(rate(grpc_server_started_total{job=\"$job\",grpc_type=\"UNARY\"}[$__interval]))","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Global Internal Error Rate","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":6},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"sum(rate(grpc_server_started_total{job=\"$job\"}[$__interval])) by (grpc_method)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_method}}","range":true,"refId":"A"}],"thresholds":[],"timeRegions":[],"title":"QPS","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"ops","logBase":1,"show":true}],"yaxis":{"align":false}},{"cards":{},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateOranges","exponent":0.3,"mode":"opacity"},"dataFormat":"tsbuckets","datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false},"scaleDistribution":{"type":"linear"}}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":12},"heatmap":{},"hideZeroBuckets":true,"highlightCards":true,"id":26,"legend":{"show":false},"options":{"calculate":false,"calculation":{},"cellGap":2,"cellValues":{},"color":{"exponent":0.5,"fill":"#b4ff00","mode":"opacity","scale":"exponential","scheme":"Oranges","steps":128},"exemplars":{"color":"rgba(255,0,255,0.7)"},"filterValues":{"le":1e-9},"legend":{"show":false},"rowsFrame":{"layout":"auto"},"showValue":"never","tooltip":{"show":true,"yHistogram":true},"yAxis":{"axisPlacement":"left","max":"+Inf","min":"0","reverse":false,"unit":"s"}},"pluginVersion":"9.1.4","reverseYBuckets":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","exemplar":false,"expr":"sum(increase(grpc_server_handled_latency_seconds_bucket{job='$job'}[$__interval])) by (le)","format":"heatmap","hide":false,"instant":false,"interval":"","legendFormat":"{{le}}","range":true,"refId":"A"}],"title":"gRPC Server latency heatmap","tooltip":{"show":true,"showHistogram":true},"transformations":[],"type":"heatmap","xAxis":{"show":true},"yAxis":{"format":"s","logBase":1,"max":"+Inf","min":"0","show":true},"yBucketBound":"auto"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"s"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":12},"id":16,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"histogram_quantile(0.95,sum by (grpc_method, le) (increase(grpc_server_handled_latency_seconds_bucket{job=\"$job\"}[$__interval])))","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"{{grpc_method}}","range":true,"refId":"A"}],"title":"0.95-Quantile Handled time","type":"timeseries"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":20},"id":20,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Unary","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":21},"id":4,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(grpc_server_started_total{job=\"$job\",grpc_type=\"UNARY\"}[$__interval])) by (grpc_service)-sum(rate(grpc_server_handled_total{job=\"$job\",grpc_type=\"UNARY\",grpc_code=\"OK\"}[$__interval])) by (grpc_service)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_service}}","refId":"A"}],"title":"Unary request error rate","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":21},"id":6,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"(1-(sum(rate(grpc_server_handled_total{job=\"$job\",grpc_type=\"UNARY\",grpc_code=\"OK\"}[$__interval])) by (grpc_service)\n/ \nsum(rate(grpc_server_started_total{job=\"$job\",grpc_type=\"UNARY\"}[$__interval])) by (grpc_service)))*100","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_service}}","refId":"A"}],"title":"Unary request error percentage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":9,"w":12,"x":0,"y":28},"id":8,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"histogram_quantile(0.99, \n  sum(rate(grpc_server_handled_latency_seconds_bucket{job=\"$job\",grpc_type=\"UNARY\"}[$__interval])) by (grpc_service,le)\n)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_service}}","refId":"A"}],"title":"99%-tile latency of unary requests","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":9,"w":12,"x":12,"y":28},"id":10,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"100.0 - (\nsum(rate(grpc_server_handled_latency_seconds_bucket{job=\"$job\",grpc_type=\"UNARY\",le=\"$le\"}[$__interval])) by (grpc_service)\n / \nsum(rate(grpc_server_handled_latency_seconds_count{job=\"$job\",grpc_type=\"UNARY\"}[$__interval])) by (grpc_service)\n) * 100.0","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_service}}","refId":"A"}],"title":"Percentage of slow unary queries","type":"timeseries"},{"collapsed":true,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":37},"id":18,"panels":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":38},"id":23,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(grpc_server_started_total{job=\"$job\",grpc_type=\"server_stream\",grpc_code=\"OK\"}[$__interval])) by (grpc_service)-sum(rate(grpc_server_handled_total{job=\"$job\",grpc_type=\"server_stream\",grpc_code=\"OK\"}[$__interval])) by (grpc_service)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_service}}","refId":"A"}],"title":"Server stream request error rate","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":38},"id":24,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"(1-(sum(rate(grpc_server_handled_total{job=\"$job\",grpc_type=\"server_stream\",grpc_code=\"OK\"}[$__interval])) by (grpc_service)\n/ \nsum(rate(grpc_server_started_total{job=\"$job\",grpc_type=\"server_stream\"}[$__interval])) by (grpc_service)))*100","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_service}}","refId":"A"}],"title":"Server stream request error percentage","type":"timeseries"}],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Server Stream","type":"row"}],"refresh":"10s","schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"description":"Prometheus","hide":0,"includeAll":false,"multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"label_values(grpc_server_handled_total,job)","hide":0,"includeAll":false,"multi":false,"name":"job","options":[],"query":{"query":"label_values(grpc_server_handled_total,job)","refId":"StandardVariableQuery"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"auto":false,"auto_count":30,"auto_min":"10s","current":{"selected":false,"text":"0.001","value":"0.001"},"hide":0,"name":"le","options":[{"selected":true,"text":"0.001","value":"0.001"},{"selected":false,"text":"0.005","value":"0.005"},{"selected":false,"text":"0.008","value":"0.008"},{"selected":false,"text":"0.01","value":"0.01"},{"selected":false,"text":"0.015","value":"0.015"},{"selected":false,"text":"0.02","value":"0.02"},{"selected":false,"text":"0.025","value":"0.025"},{"selected":false,"text":"0.03","value":"0.03"},{"selected":false,"text":"0.04","value":"0.04"},{"selected":false,"text":"0.05","value":"0.05"},{"selected":false,"text":"0.06","value":"0.06"},{"selected":false,"text":"0.07","value":"0.07"},{"selected":false,"text":"0.08","value":"0.08"},{"selected":false,"text":"0.09","value":"0.09"},{"selected":false,"text":"0.1","value":"0.1"},{"selected":false,"text":"1.0","value":"1.0"},{"selected":false,"text":"2.0","value":"2.0"},{"selected":false,"text":"5.0","value":"5.0"},{"selected":false,"text":"10.0","value":"10.0"},{"selected":false,"text":"+Inf","value":"+Inf"}],"query":"\"0.001\",\"0.005\",\"0.008\",\"0.01\",\"0.015\",\"0.02\",\"0.025\",\"0.03\",\"0.04\",\"0.05\",\"0.06\",\"0.07\",\"0.08\",\"0.09\",\"0.1\",\"1.0\",\"2.0\",\"5.0\",\"10.0\",\"+Inf\"","queryValue":"","refresh":2,"skipUrlSync":false,"type":"interval"}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"gRPC Metrics","uid":"z4xSuvYiz","version":5,"weekStart":""}

        prometheus:
          json: |
            {"__inputs":[{"name":"DS_PROMETHEUS","label":"Prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}],"__elements":{},"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"9.1.4"},{"type":"panel","id":"graph","name":"Graph (old)","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""},{"type":"panel","id":"table-old","name":"Table (old)","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Overview of metrics from Prometheus 2.0.  \r\nUseful for using prometheus to monitor your prometheus.\r\nRevisions welcome!","editable":true,"fiscalYearStartMonth":0,"gnetId":3662,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":32,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"at a glance","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Percentage of uptime during the most recent $interval period.  Change the period with the 'interval' dropdown above.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":3,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(245, 54, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":90},{"color":"rgba(50, 172, 45, 0.97)","value":99}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":6,"x":0,"y":1},"id":2,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"avg(avg_over_time(up{instance=~\"$instance\",job=~\"$job\"}[$interval]) * 100)","format":"time_series","intervalFactor":2,"legendFormat":"","refId":"A","step":240}],"title":"Uptime [$interval]","type":"stat"},{"columns":[],"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Servers which are DOWN RIGHT NOW! \nFIX THEM!!","fontSize":"100%","gridPos":{"h":7,"w":6,"x":6,"y":1},"hideTimeOverride":true,"id":25,"links":[],"scroll":true,"showHeader":true,"sort":{"col":0,"desc":true},"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/__name__|job|Value/","thresholds":[],"type":"hidden","unit":"short"},{"alias":"   ","align":"auto","colorMode":"cell","colors":["rgba(255, 0, 0, 0.9)","rgba(237, 129, 40, 0.89)","rgba(255, 0, 0, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"pattern":"instance","thresholds":["","",""],"type":"string","unit":"short"}],"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"up{instance=~\"$instance\",job=~\"$job\"} < 1","format":"table","intervalFactor":2,"refId":"A","step":2}],"timeFrom":"1s","title":"Currently Down","transform":"table","type":"table-old"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Total number of time series in prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1000000},{"color":"rgba(245, 54, 54, 0.9)","value":2000000}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":6,"x":12,"y":1},"id":12,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(prometheus_tsdb_head_series{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"refId":"B","step":240}],"title":"Total Series","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":6,"x":18,"y":1},"id":14,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(prometheus_tsdb_head_chunks{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"refId":"B","step":240}],"title":"Memory Chunks","type":"stat"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":8},"id":33,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"quick numbers","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The total number of rule group evaluations missed due to slow rule group evaluation.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245, 54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":4,"x":0,"y":9},"id":16,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(sum_over_time(prometheus_evaluator_iterations_missed_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":240}],"title":"Missed Iterations [$interval]","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The total number of rule group evaluations skipped due to throttled metric storage.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245, 54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":4,"x":4,"y":9},"id":18,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(sum_over_time(prometheus_evaluator_iterations_skipped_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":240}],"title":"Skipped Iterations [$interval]","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Total number of scrapes that hit the sample limit and were rejected.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245, 54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":4,"x":8,"y":9},"id":19,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(sum_over_time(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":240}],"title":"Tardy Scrapes [$interval]","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Number of times the database failed to reload block data from disk.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245, 54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":4,"x":12,"y":9},"id":13,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(sum_over_time(prometheus_tsdb_reloads_failures_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":240}],"title":"Reload Failures [$interval]","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Sum of all skipped scrapes","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245, 54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":8,"x":16,"y":9},"id":20,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(sum_over_time(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"$job\",instance=~\"$instance\"}[$interval])) + \nsum(sum_over_time(prometheus_target_scrapes_sample_duplicate_timestamp_total{job=~\"$job\",instance=~\"$instance\"}[$interval])) + \nsum(sum_over_time(prometheus_target_scrapes_sample_out_of_bounds_total{job=~\"$job\",instance=~\"$instance\"}[$interval])) + \nsum(sum_over_time(prometheus_target_scrapes_sample_out_of_order_total{job=~\"$job\",instance=~\"$instance\"}[$interval])) ","format":"time_series","intervalFactor":2,"refId":"A","step":240}],"title":"Skipped Scrapes [$interval]","type":"stat"},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":16},"id":34,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"up","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":17},"hiddenSeries":false,"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"up{instance=~\"$instance\",job=~\"$job\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{instance}}","refId":"A","step":10}],"thresholds":[],"timeRegions":[],"title":"Upness (stacked)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"none","label":"Up","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":24},"id":35,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"series & storage","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":25},"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"prometheus_tsdb_head_series{job=~\"$job\",instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":30}],"thresholds":[],"title":"Series Count","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Series","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":25},"id":5,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"prometheus_tsdb_head_chunks{job=~\"$job\",instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":30}],"thresholds":[],"title":"Storage Memory Chunks","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Chunks","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":32},"id":36,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"appended samples","type":"row"},{"aliasColors":{"10.58.3.10:80":"#BA43A9"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Rate of total number of appended samples","fill":1,"gridPos":{"h":7,"w":24,"x":0,"y":33},"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"rate(prometheus_tsdb_head_samples_appended_total{job=~\"$job\",instance=~\"$instance\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":20}],"thresholds":[],"title":"Appended Samples per Second","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Samples / Second","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":40},"id":37,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"sync","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Total number of syncs that were executed on a scrape pool.","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":41},"id":6,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(prometheus_target_scrape_pool_sync_total{job=~\"$job\",instance=~\"$instance\"}) by (scrape_job)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"{{scrape_job}}","refId":"B","step":30}],"thresholds":[],"title":"Scrape Sync Total","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Syncs","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Actual interval to sync the scrape pool.","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":41},"id":21,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(prometheus_target_sync_length_seconds_sum{job=~\"$job\",instance=~\"$instance\"}[2m])) by (scrape_job) * 1000","format":"time_series","intervalFactor":2,"legendFormat":"{{scrape_job}}","refId":"A","step":30}],"thresholds":[],"title":"Target Sync","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Milliseconds","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":48},"id":38,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"scrapes","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":49},"id":29,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"scrape_duration_seconds{instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":30}],"thresholds":[],"title":"Scrape Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Seconds","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Total number of rejected scrapes","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":49},"id":30,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"exceeded sample limit","refId":"A","step":30},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(prometheus_target_scrapes_sample_duplicate_timestamp_total{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"duplicate timestamp","refId":"B","step":30},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(prometheus_target_scrapes_sample_out_of_bounds_total{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"out of bounds","refId":"C","step":30},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(prometheus_target_scrapes_sample_out_of_order_total{job=~\"$job\",instance=~\"$instance\"}) ","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"out of order","refId":"D","step":30}],"thresholds":[],"title":"Rejected Scrapes","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Scrapes","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":56},"id":39,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"durations","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The duration of rule group evaluations","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":57},"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"1000 * rate(prometheus_evaluator_duration_seconds_sum{job=~\"$job\", instance=~\"$instance\"}[5m]) / rate(prometheus_evaluator_duration_seconds_count{job=~\"$job\", instance=~\"$instance\"}[5m])","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"E","step":30}],"thresholds":[],"title":"Average Rule Evaluation Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Milliseconds","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":57},"id":11,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(http_request_duration_microseconds_count{job=~\"$job\",instance=~\"$instance\"}[1m])) by (handler) > 0","format":"time_series","intervalFactor":2,"legendFormat":"{{handler}}","refId":"A","step":30}],"thresholds":[],"title":"HTTP Request Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Microseconds","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":64},"id":15,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(prometheus_engine_query_duration_seconds_sum{job=~\"$job\",instance=~\"$instance\"}) by (slice)","format":"time_series","intervalFactor":2,"legendFormat":"{{slice}}","refId":"A","step":30}],"thresholds":[],"title":"Prometheus Engine Query Duration Seconds","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Seconds","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Rule-group evaluations \n - total\n - missed due to slow rule group evaluation\n - skipped due to throttled metric storage","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":64},"id":31,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(prometheus_evaluator_iterations_total{job=~\"$job\", instance=~\"$instance\"}[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Total","refId":"B","step":30},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(prometheus_evaluator_iterations_missed_total{job=~\"$job\", instance=~\"$instance\"}[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Missed","refId":"A","step":30},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(prometheus_evaluator_iterations_skipped_total{job=~\"$job\", instance=~\"$instance\"}[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Skipped","refId":"C","step":30}],"thresholds":[],"title":"Rule Evaluator Iterations","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"iterations","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":71},"id":40,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"notifications","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":24,"x":0,"y":72},"id":22,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"rate(prometheus_notifications_sent_total[5m])","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":20}],"thresholds":[],"title":"Notifications Sent","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Notifications","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":79},"id":41,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"config","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":80},"id":23,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"(time() - prometheus_config_last_reload_success_timestamp_seconds{job=~\"$job\",instance=~\"$instance\"}) / 60","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":30}],"thresholds":[],"title":"Minutes Since Successful Config Reload","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Minutes","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":80},"id":24,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"prometheus_config_last_reload_successful{job=~\"$job\",instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":30}],"thresholds":[],"title":"Successful Config Reload","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Success","logBase":1,"max":"1","min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":87},"id":42,"panels":[],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"garbage collection","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"GC invocation durations","fill":1,"gridPos":{"h":7,"w":24,"x":0,"y":88},"id":28,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(go_gc_duration_seconds_sum{instance=~\"$instance\",job=~\"$job\"}[2m])) by (instance)","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":20}],"thresholds":[],"title":"GC Rate / 2m","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":true,"datasource":{"type":"datasource","uid":"grafana"},"gridPos":{"h":1,"w":24,"x":0,"y":95},"id":43,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"This is probably wrong!  Please help.","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":96},"id":26,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"allocated","stack":false}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_alloc_bytes_total{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","hide":true,"intervalFactor":2,"legendFormat":"alloc_bytes_total","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_alloc_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"allocated","refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_buck_hash_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"profiling bucket hash table","refId":"C","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_gc_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"GC metadata","refId":"D","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_heap_alloc_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap in-use","refId":"E","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_heap_idle_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap idle","refId":"F","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_heap_inuse_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap in use","refId":"G","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_heap_released_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap released","refId":"H","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_heap_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap system","refId":"I","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_mcache_inuse_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mcache in use","refId":"J","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_mcache_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mcache sys","refId":"K","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_mspan_inuse_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mspan in use","refId":"L","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_mspan_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mspan sys","refId":"M","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_next_gc_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap next gc","refId":"N","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_other_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"other sys","refId":"O","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_stack_inuse_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"stack in use","refId":"P","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_stack_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"stack sys","refId":"Q","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(go_memstats_sys_bytes{job=~\"$job\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"sys","refId":"R","step":10}],"thresholds":[],"title":"Go Memory Usage (FIXME)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":6,"x":12,"y":96},"id":9,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"prometheus_target_interval_length_seconds{instance=~\"$instance\", job=~\"$job\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{quantile}} {{interval}}","refId":"A","step":20}],"thresholds":[],"title":"Scrape Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Seconds","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"gridPos":{"h":7,"w":6,"x":18,"y":96},"id":7,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum(rate(prometheus_target_interval_length_seconds_count{job=~\"$job\",instance=~\"$instance\"}[5m])) by (interval)","format":"time_series","intervalFactor":2,"legendFormat":"{{interval}}","refId":"A","step":20}],"thresholds":[],"title":"Target Scrapes / 5m","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Scrapes","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]}],"targets":[{"datasource":{"type":"datasource","uid":"grafana"},"refId":"A"}],"title":"Broken, ignore","type":"row"}],"refresh":"30s","schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"description":"Prometheus","hide":0,"includeAll":false,"multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"multi":true,"name":"job","options":[],"query":{"query":"query_result(prometheus_tsdb_head_samples_appended_total)","refId":"prometheus-job-Variable-Query"},"refresh":2,"regex":"/.*job=\"([^\"]+)/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"multi":true,"name":"instance","options":[],"query":{"query":"query_result(up{job=~\"$job\"})","refId":"prometheus-instance-Variable-Query"},"refresh":2,"regex":"/.*instance=\"([^\"]+).*/","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"tags":[],"text":"1h","value":"1h"},"hide":0,"includeAll":false,"multi":false,"name":"interval","options":[{"selected":true,"text":"1h","value":"1h"},{"selected":false,"text":"3h","value":"3h"},{"selected":false,"text":"6h","value":"6h"},{"selected":false,"text":"12h","value":"12h"},{"selected":false,"text":"1d","value":"1d"},{"selected":false,"text":"2d","value":"2d"},{"selected":false,"text":"7d","value":"7d"},{"selected":false,"text":"30d","value":"30d"},{"selected":false,"text":"90d","value":"90d"},{"selected":false,"text":"180d","value":"180d"}],"query":"1h, 3h, 6h, 12h, 1d, 2d, 7d, 30d, 90d, 180d","skipUrlSync":false,"type":"custom"}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Prometheus 2.0 Overview","uid":"lQ8vfDWVk","version":1,"weekStart":""}

        deployment:
          json: |
            {"__inputs":[{"name":"DS_PROMETHEUS","label":"Prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}],"__elements":{},"__requires":[{"type":"panel","id":"gauge","name":"Gauge","version":""},{"type":"grafana","id":"grafana","name":"Grafana","version":"9.1.4"},{"type":"panel","id":"graph","name":"Graph (old)","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Monitors Kubernetes deployments in cluster using Prometheus. Shows overall cluster CPU / Memory of deployments, replicas in each deployment. Uses Kube state metrics and cAdvisor metrics (741)","editable":true,"fiscalYearStartMonth":0,"gnetId":8588,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":65},{"color":"rgba(245, 54, 54, 0.9)","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":8,"x":0,"y":0},"id":1,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (container_memory_working_set_bytes{pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", node=~\"^$Node$\"}) / sum (kube_node_status_allocatable{resource=\"memory\", unit=\"byte\", node=~\"^$Node.*$\"}) * 100","format":"time_series","interval":"10s","intervalFactor":1,"refId":"A","step":900}],"title":"Deployment memory usage","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":65},{"color":"rgba(245, 54, 54, 0.9)","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":8,"x":8,"y":0},"id":2,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (rate (container_cpu_usage_seconds_total{pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", node=~\"^$Node$\"}[2m])) / sum (machine_cpu_cores{node=~\"^$Node$\"}) * 100","format":"time_series","interval":"10s","intervalFactor":1,"refId":"A","step":900}],"title":"Deployment CPU usage","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245, 54, 54, 0.9)","value":30}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":8,"x":16,"y":0},"id":3,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"(((sum(kube_deployment_status_replicas{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_desired_number_scheduled{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))) - ((sum(kube_deployment_status_replicas_available{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_status_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_number_ready{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)))) / ((sum(kube_deployment_status_replicas{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_desired_number_scheduled{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))) * 100","format":"time_series","intervalFactor":2,"refId":"A","step":1800}],"title":"Unavailable Replicas","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":0,"y":5},"id":4,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (container_memory_working_set_bytes{pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", node=~\"^$Node$\"})","format":"time_series","intervalFactor":2,"refId":"A","step":1800}],"title":"Used","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":4,"y":5},"id":5,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (kube_node_status_allocatable{resource=\"memory\", unit=\"byte\", node=~\"^$Node.*$\"})","format":"time_series","intervalFactor":2,"refId":"A","step":1800}],"title":"Total","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":8,"y":5},"id":6,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (rate (container_cpu_usage_seconds_total{pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", node=~\"^$Node$\"}[1m]))","format":"time_series","intervalFactor":2,"refId":"A","step":1800}],"title":"Used","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":12,"y":5},"id":7,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (machine_cpu_cores{node=~\"^$Node$\"})","intervalFactor":2,"refId":"A","step":1800}],"title":"Total","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":16,"y":5},"id":8,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"(sum(kube_deployment_status_replicas_available{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_status_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_number_ready{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))","format":"time_series","intervalFactor":2,"refId":"A","step":1800}],"title":"Available (cluster)","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":20,"y":5},"id":9,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"(sum(kube_deployment_status_replicas{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_desired_number_scheduled{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))","format":"time_series","intervalFactor":2,"legendFormat":"{{ $Daemonset }}","refId":"A","step":1800}],"title":"Total (cluster)","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":3,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":11,"w":24,"x":0,"y":8},"height":"","hiddenSeries":false,"id":10,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/avlbl.*/","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (rate (container_cpu_usage_seconds_total{image!=\"\",name=~\"^k8s_.*\",io_kubernetes_container_name!=\"POD\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"}[1m])) by (pod_name,node)","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"legendFormat":"real: {{ node }} | {{ pod_name }} ","metric":"container_cpu","refId":"A","step":60},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (kube_pod_container_resource_requests_cpu_cores{pod=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"}) by (pod,node)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"rqst: {{ node }} | {{ pod }}","refId":"B","step":120},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum ((kube_node_status_allocatable_cpu_cores{node=~\"^$Node$\"})) by (node)","format":"time_series","hide":true,"intervalFactor":2,"legendFormat":"avlbl: {{ node }}","refId":"C","step":30}],"thresholds":[],"timeRegions":[],"title":"CPU usage","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"cores","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":13,"w":24,"x":0,"y":19},"hiddenSeries":false,"id":11,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/^avlbl.*$/","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (container_memory_working_set_bytes{id!=\"/\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"}) by (pod_name,node)","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"legendFormat":"real: {{node }} | {{ pod_name }}","metric":"container_memory_usage:sort_desc","refId":"A","step":60},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum ((kube_pod_container_resource_requests_memory_bytes{pod=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"})) by (pod,node)","format":"time_series","intervalFactor":2,"legendFormat":"rqst: {{ node }} | {{ pod }}","refId":"B","step":120},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum ((kube_node_status_allocatable_memory_bytes{node=~\"^$Node$\"})) by (node)","format":"time_series","hide":true,"intervalFactor":2,"legendFormat":"avlbl: {{ node }}","refId":"C","step":30}],"thresholds":[],"timeRegions":[],"title":"Memory usage","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"bytes","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":24,"x":0,"y":32},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"100 * (kubelet_volume_stats_used_bytes{node=~\"^$Node$\", persistentvolumeclaim=~\".*$Deployment$Statefulset$Daemonset.*$\"} / kubelet_volume_stats_capacity_bytes{node=~\"^$Node$\", persistentvolumeclaim=~\".*$Deployment$Statefulset$Daemonset.*$\"})","format":"time_series","intervalFactor":2,"legendFormat":"{{ persistentvolumeclaim }} | {{ node }}","refId":"A","step":120}],"thresholds":[],"timeRegions":[],"title":"Disk Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"percent","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"editable":true,"error":false,"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":13,"w":24,"x":0,"y":41},"hiddenSeries":false,"id":13,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum (rate (container_network_receive_bytes_total{id!=\"/\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"}[1m])) by (pod_name, node)","format":"time_series","interval":"10s","intervalFactor":1,"legendFormat":"-> {{ node }} | {{ pod_name }}","metric":"network","refId":"A","step":60},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"- sum( rate (container_network_transmit_bytes_total{id!=\"/\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"}[1m])) by (pod_name, node)","format":"time_series","interval":"10s","intervalFactor":1,"legendFormat":"<- {{ node }} | {{ pod_name }}","metric":"network","refId":"B","step":60}],"thresholds":[],"timeRegions":[],"title":"All processes network I/O","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"Bps","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}}],"refresh":"30s","schemaVersion":37,"style":"dark","tags":["kubernetes","deployment"],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"description":"Prometheus","hide":0,"includeAll":false,"multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":"()","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"multi":false,"name":"Deployment","options":[],"query":{"query":"label_values(deployment)","refId":"Prometheus-Deployment-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":"()","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"multi":false,"name":"Statefulset","options":[],"query":{"query":"label_values(statefulset)","refId":"Prometheus-Statefulset-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":"()","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"multi":false,"name":"Daemonset","options":[],"query":{"query":"label_values(daemonset)","refId":"Prometheus-Daemonset-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"","hide":0,"includeAll":true,"multi":false,"name":"Node","options":[],"query":{"query":"label_values(node)","refId":"Prometheus-Node-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Kubernetes Deployment Statefulset Daemonset metrics","uid":"oWe9aYxmk","version":3,"weekStart":""}

        nodeExporter:
          json: |
            {"__inputs":[{"name":"DS_PROMETHEUS","label":"Prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}],"__elements":{},"__requires":[{"type":"panel","id":"gauge","name":"Gauge","version":""},{"type":"grafana","id":"grafana","name":"Grafana","version":"9.1.4"},{"type":"panel","id":"graph","name":"Graph (old)","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""},{"type":"panel","id":"table-old","name":"Table (old)","version":""},{"type":"panel","id":"timeseries","name":"Time series","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Graphed values of Prometheus node exporter","editable":true,"fiscalYearStartMonth":0,"gnetId":1860,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":83,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Basic CPU / Mem / Net Gauge","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Busy state of all CPU cores together","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":85},{"color":"rgba(245, 54, 54, 0.9)","value":95}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":4,"x":0,"y":1},"id":20,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"(((count(count(node_cpu_seconds_total{instance=~\"$node:.*\"}) by (cpu))) - avg(sum by (mode)(irate(node_cpu_seconds_total{mode='idle',instance=~\"$node:.*\"}[5m])))) * 100) / count(count(node_cpu_seconds_total{instance=~\"$node:.*\"}) by (cpu))","hide":false,"intervalFactor":1,"legendFormat":"","refId":"A","step":30}],"title":"CPU Busy Now","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Used RAM Memory without swap and cache","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":80},{"color":"rgba(245, 54, 54, 0.9)","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":4,"x":4,"y":1},"id":16,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"((node_memory_MemTotal_bytes{instance=~\"$node:.*\"} - node_memory_MemFree_bytes{instance=~\"$node:.*\"} - node_memory_Cached_bytes{instance=~\"$node:.*\"}) / (node_memory_MemTotal_bytes{instance=~\"$node:.*\"} )) * 100","intervalFactor":1,"refId":"A","step":30}],"title":"Used RAM Memory","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Used Swap","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":10},{"color":"rgba(245, 54, 54, 0.9)","value":25}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":4,"x":8,"y":1},"id":21,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"((node_memory_SwapTotal_bytes{instance=~\"$node:.*\"} - node_memory_SwapFree_bytes{instance=~\"$node:.*\"}) / (node_memory_SwapTotal_bytes{instance=~\"$node:.*\"} )) * 100","intervalFactor":1,"refId":"A","step":30}],"title":"Used SWAP","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Busy state of all CPU cores together (1 min average)","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":85},{"color":"rgba(245, 54, 54, 0.9)","value":95}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":4,"x":12,"y":1},"id":19,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"avg(node_load1{instance=~\"$node:.*\"}) /  count(count(node_cpu_seconds_total{instance=~\"$node:.*\"}) by (cpu)) * 100","hide":false,"intervalFactor":1,"refId":"A","step":30}],"title":"CPU System Load (1m avg)","type":"gauge"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Basic network info per interface.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":30,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[{"matcher":{"id":"byName","options":"Recv_bytes_eth2"},"properties":[{"id":"color","value":{"fixedColor":"#7EB26D","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Recv_bytes_lo"},"properties":[{"id":"color","value":{"fixedColor":"#0A50A1","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Recv_drop_eth2"},"properties":[{"id":"color","value":{"fixedColor":"#6ED0E0","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Recv_drop_lo"},"properties":[{"id":"color","value":{"fixedColor":"#E0F9D7","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Recv_errs_eth2"},"properties":[{"id":"color","value":{"fixedColor":"#BF1B00","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Recv_errs_lo"},"properties":[{"id":"color","value":{"fixedColor":"#CCA300","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Trans_bytes_eth2"},"properties":[{"id":"color","value":{"fixedColor":"#7EB26D","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Trans_bytes_lo"},"properties":[{"id":"color","value":{"fixedColor":"#0A50A1","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Trans_drop_eth2"},"properties":[{"id":"color","value":{"fixedColor":"#6ED0E0","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Trans_drop_lo"},"properties":[{"id":"color","value":{"fixedColor":"#E0F9D7","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Trans_errs_eth2"},"properties":[{"id":"color","value":{"fixedColor":"#BF1B00","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Trans_errs_lo"},"properties":[{"id":"color","value":{"fixedColor":"#CCA300","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"recv_bytes_lo"},"properties":[{"id":"color","value":{"fixedColor":"#0A50A1","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"recv_drop_eth0"},"properties":[{"id":"color","value":{"fixedColor":"#99440A","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"recv_drop_lo"},"properties":[{"id":"color","value":{"fixedColor":"#967302","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"recv_errs_eth0"},"properties":[{"id":"color","value":{"fixedColor":"#BF1B00","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"recv_errs_lo"},"properties":[{"id":"color","value":{"fixedColor":"#890F02","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"trans_bytes_eth0"},"properties":[{"id":"color","value":{"fixedColor":"#7EB26D","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"trans_bytes_lo"},"properties":[{"id":"color","value":{"fixedColor":"#0A50A1","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"trans_drop_eth0"},"properties":[{"id":"color","value":{"fixedColor":"#99440A","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"trans_drop_lo"},"properties":[{"id":"color","value":{"fixedColor":"#967302","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"trans_errs_eth0"},"properties":[{"id":"color","value":{"fixedColor":"#BF1B00","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"trans_errs_lo"},"properties":[{"id":"color","value":{"fixedColor":"#890F02","mode":"fixed"}}]},{"matcher":{"id":"byRegexp","options":"/.*trans.*/"},"properties":[{"id":"custom.transform","value":"negative-Y"}]}]},"gridPos":{"h":5,"w":8,"x":16,"y":1},"id":74,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.0.5","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_bytes_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"recv bytes {{device}}","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_bytes_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"trans bytes {{device}} ","refId":"B","step":20}],"title":"Network Traffic","type":"timeseries"},{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":6},"id":84,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Basic CPU / Mem / Net Info","type":"row"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Total number of CPU cores","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":0,"y":7},"id":14,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"count(count(node_cpu_seconds_total{instance=~\"$node:.*\"}) by (cpu))","intervalFactor":1,"refId":"A","step":30}],"title":"CPU Cores","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Total RAM","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":4,"y":7},"id":75,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_MemTotal_bytes{instance=~\"$node:.*\"}","intervalFactor":1,"refId":"A","step":30}],"title":"Total RAM","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Total SWAP","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":8,"y":7},"id":18,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_SwapTotal_bytes{instance=~\"$node:.*\"}","intervalFactor":1,"refId":"A","step":30}],"title":"Total SWAP","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"System Load (1m avg)","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":12,"y":7},"id":17,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"node_load1{instance=~\"$node:.*\"}","hide":false,"intervalFactor":1,"legendFormat":"__auto","range":true,"refId":"A","step":30}],"title":"System Load (1m avg)","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"System uptime","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":1,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"s"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":16,"y":7},"hideTimeOverride":true,"id":15,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_time_seconds{instance=~\"$node:.*\"} - node_boot_time_seconds{instance=~\"$node:.*\"}","intervalFactor":2,"refId":"A","step":60}],"title":"Uptime","type":"stat"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Used RootFS","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":70},{"color":"rgba(245, 54, 54, 0.9)","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":20,"y":7},"id":23,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.1.4","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"((node_filesystem_size_bytes{device=~\"rootfs\",instance=~\"$node:.*\"} - node_filesystem_free_bytes{device=~\"rootfs\",instance=~\"$node:.*\"}) * 100 ) / (node_filesystem_size_bytes{device=~\"rootfs\",instance=~\"$node:.*\"})","hide":false,"intervalFactor":1,"refId":"A","step":30}],"title":"Used RootFS","type":"stat"},{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":10},"id":85,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Basic CPU / Mem Graph","type":"row"},{"aliasColors":{"Busy":"#EAB839","Idle":"#052B51","Idle - Waiting for something to happen":"#052B51","guest":"#9AC48A","idle":"#052B51","iowait":"#EAB839","irq":"#BF1B00","nice":"#C15C17","softirq":"#E24D42","steal":"#FCE2DE","system":"#508642","user":"#5195CE"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"description":"Basic CPU info","fill":4,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":11},"hiddenSeries":false,"id":77,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":250,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":true,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum ( irate(node_cpu_seconds_total{mode!='idle',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"Busy","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode='idle',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"Idle","refId":"C","step":10}],"thresholds":[],"timeRegions":[],"title":"CPU Basic","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"","logBase":1,"max":"100","min":"0","show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"Apps":"#629E51","Buffers":"#614D93","Cache":"#6D1F62","Cached":"#511749","Committed":"#508642","Free":"#0A437C","Harware Corrupted - Amount of RAM that the kernel identified as corrupted / not working":"#CFFAFF","Inactive":"#584477","PageTables":"#0A50A1","Page_Tables":"#0A50A1","RAM_Free":"#E0F9D7","SWAP Used":"#BF1B00","Slab":"#806EB7","Slab_Cache":"#E0752D","Swap":"#BF1B00","Swap Used":"#BF1B00","Swap_Cache":"#C15C17","Swap_Free":"#2F575E","Unused":"#EAB839"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"description":"Basic memory usage","fill":4,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":11},"hiddenSeries":false,"id":78,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":350,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.1.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*RAM Used*./","stack":false}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_MemTotal_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"RAM Total","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_MemTotal_bytes{instance=~\"$node:.*\"} - node_memory_MemFree_bytes{instance=~\"$node:.*\"} - node_memory_Cached_bytes{instance=~\"$node:.*\"} - node_memory_Buffers_bytes{instance=~\"$node:.*\"} - node_memory_Slab_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"RAM Used","refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"(node_memory_SwapTotal_bytes{instance=~\"$node:.*\"} - node_memory_SwapFree_bytes{instance=~\"$node:.*\"})","intervalFactor":2,"legendFormat":"SWAP Used","refId":"C","step":10}],"thresholds":[],"timeRegions":[],"title":"Memory Basic","tooltip":{"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","label":"","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":20},"id":86,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Basic Filesystem Info","type":"row"},{"columns":[{"$$hashKey":"object:220","text":"Min","value":"min"},{"$$hashKey":"object:221","text":"Max","value":"max"},{"$$hashKey":"object:222","text":"Current","value":"current"}],"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Local filesystem usage","fontSize":"80%","gridPos":{"h":8,"w":16,"x":0,"y":21},"id":73,"links":[],"scroll":true,"showHeader":true,"sort":{"col":2,"desc":true},"styles":[{"align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"date"},{"align":"auto","colorMode":"value","colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"decimals":2,"pattern":"Current|Max|Min","thresholds":["80","90"],"type":"number","unit":"percent"}],"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"100 - (node_filesystem_free_bytes{instance=~\"$node:.*\",fstype=~\"xfs|ext4\"} / node_filesystem_size_bytes{instance=~\"$node:.*\",fstype=~\"xfs|ext4\"} * 100)","intervalFactor":2,"legendFormat":"{{ mountpoint }}","refId":"A","step":10}],"title":"Filesystem Usage","transform":"timeseries_aggregations","type":"table-old"},{"columns":[{"$$hashKey":"object:288","text":"Current","value":"current"}],"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Local filesystem sIze info","fontSize":"80%","gridPos":{"h":8,"w":8,"x":16,"y":21},"id":72,"links":[],"scroll":true,"showHeader":true,"sort":{"col":0,"desc":true},"styles":[{"align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"date"},{"align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"Current","thresholds":[],"type":"number","unit":"bytes"}],"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_filesystem_size_bytes{instance=~\"$node:.*\",fstype=~\"xfs|ext4\"}","intervalFactor":2,"legendFormat":"{{ mountpoint }}","refId":"A","step":20}],"title":"Filesystem Size","transform":"timeseries_aggregations","type":"table-old"},{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":29},"id":87,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"CPU Memory Net Disk","type":"row"},{"aliasColors":{"Idle - Waiting for something to happen":"#052B51","guest":"#9AC48A","idle":"#052B51","iowait":"#EAB839","irq":"#BF1B00","nice":"#C15C17","softirq":"#E24D42","steal":"#FCE2DE","system":"#508642","user":"#5195CE"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"description":"CPU info","fill":3,"fillGradient":0,"gridPos":{"h":13,"w":24,"x":0,"y":30},"hiddenSeries":false,"id":3,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sideWidth":250,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":true,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode=\"system\",instance=~\"$node:.*\"}[5m]))","interval":"10s","intervalFactor":2,"legendFormat":"System - Processes executing in kernel mode","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode='user',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"User - Normal processes executing in user mode","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode='nice',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"Nice - Niced processes executing in user mode","refId":"C","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode='idle',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"Idle - Waiting for something to happen","refId":"F","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode='iowait',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"Iowait - Waiting for I/O to complete","refId":"D","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode='irq',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"Irq - Servicing interrupts","refId":"G","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode='softirq',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"Softirq - Servicing softirqs","refId":"H","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode='steal',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"Steal - Time spent in other operating systems when running in a virtualized environment","refId":"E","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"sum by (mode)(irate(node_cpu_seconds_total{mode='guest',instance=~\"$node:.*\"}[5m]))","intervalFactor":2,"legendFormat":"Guest - Time spent running a virtual CPU for a guest operating system","refId":"I","step":4}],"thresholds":[],"timeRegions":[],"title":"CPU","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"","logBase":1,"max":"100","min":"0","show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"Apps":"#629E51","Buffers":"#614D93","Cache":"#6D1F62","Cached":"#511749","Committed":"#508642","Free":"#0A437C","Harware Corrupted - Amount of RAM that the kernel identified as corrupted / not working":"#CFFAFF","Inactive":"#584477","PageTables":"#0A50A1","Page_Tables":"#0A50A1","RAM_Free":"#E0F9D7","Slab":"#806EB7","Slab_Cache":"#E0752D","Swap":"#BF1B00","Swap - Swap memory usage":"#BF1B00","Swap_Cache":"#C15C17","Swap_Free":"#2F575E","Unused":"#EAB839","Unused - Free memory unasigned":"#052B51"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"description":"Memory Stack","fill":3,"fillGradient":0,"gridPos":{"h":13,"w":24,"x":0,"y":43},"hiddenSeries":false,"id":24,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sideWidth":350,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Committed - *./","stack":false},{"alias":"/.*Mapped - *./","stack":false},{"alias":"/.*Active - *./","stack":false},{"alias":"/.*Inactive - *./","stack":false},{"alias":"/.*VmallocUsed - *./","stack":false},{"alias":"/.*Commit Limit - *./","stack":false},{"alias":"/.*Dirty - *./","stack":false},{"alias":"/.*Harware Corrupted - *./","stack":false},{"alias":"/.*Unevictable - *./","stack":false}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_MemTotal_bytes{instance=~\"$node:.*\"} - node_memory_MemFree_bytes{instance=~\"$node:.*\"} - node_memory_Buffers_bytes{instance=~\"$node:.*\"} - node_memory_Cached_bytes{instance=~\"$node:.*\"} - node_memory_Slab_bytes{instance=~\"$node:.*\"} - node_memory_PageTables_bytes{instance=~\"$node:.*\"} - node_memory_SwapCached_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"Apps - Memory used by processes","refId":"Q","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_PageTables_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"PageTables - Memory dedicated to the lowest page table level","refId":"G","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_SwapCached_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"SwapCache - Swap used as cache memory","refId":"F","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Slab_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"Slab - Memory used by the kernel to cache data structures for its own use","refId":"E","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Cached_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"Cache - Physical RAM used as cache memory","refId":"C","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Buffers_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"Buffers - Physical RAM used for file buffers","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_MemFree_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"Unused - Free memory unasigned","refId":"D","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"(node_memory_SwapTotal_bytes{instance=~\"$node:.*\"} - node_memory_SwapFree_bytes{instance=~\"$node:.*\"})","hide":false,"intervalFactor":2,"legendFormat":"Swap - Swap memory usage","refId":"I","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Committed_AS_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Committed - The amount of memory presently allocated on the system","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Mapped_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Mapped - Files which have been mmaped, such as libraries","refId":"H","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Active_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Active - Memory that has been used more recently and usually not reclaimed unless absolutely necessary","refId":"J","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Inactive_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Inactive - Memory which has been less recently used.  It is more eligible to be reclaimed for other purposes","refId":"K","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_VmallocUsed_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"VmallocUsed - Memory of used virtual address space","refId":"L","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_CommitLimit_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Commit Limit - Total amount of  memory currently available to be allocated on the system","refId":"M","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Dirty_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Dirty - Memory which is waiting to get written back to the disk","refId":"N","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_HardwareCorrupted_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Harware Corrupted - Amount of RAM that the kernel identified as corrupted / not working","refId":"O","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Unevictable_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Unevictable - Unevictable pages can't be swapped out for a variety of reasons","refId":"P","step":4}],"thresholds":[],"timeRegions":[],"title":"Memory Stack","tooltip":{"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","label":"","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"Recv_bytes_eth2":"#7EB26D","Recv_bytes_lo":"#0A50A1","Recv_drop_eth2":"#6ED0E0","Recv_drop_lo":"#E0F9D7","Recv_errs_eth2":"#BF1B00","Recv_errs_lo":"#CCA300","Trans_bytes_eth2":"#7EB26D","Trans_bytes_lo":"#0A50A1","Trans_drop_eth2":"#6ED0E0","Trans_drop_lo":"#E0F9D7","Trans_errs_eth2":"#BF1B00","Trans_errs_lo":"#CCA300","recv_bytes_lo":"#0A50A1","recv_drop_eth0":"#99440A","recv_drop_lo":"#967302","recv_errs_eth0":"#BF1B00","recv_errs_lo":"#890F02","trans_bytes_eth0":"#7EB26D","trans_bytes_lo":"#0A50A1","trans_drop_eth0":"#99440A","trans_drop_lo":"#967302","trans_errs_eth0":"#BF1B00","trans_errs_lo":"#890F02"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Network info. Need to fix https://github.com/grafana/grafana/issues/1271","fill":3,"fillGradient":0,"gridPos":{"h":13,"w":24,"x":0,"y":56},"hiddenSeries":false,"id":59,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*trans.*/","transform":"negative-Y"},{"alias":"/.*errs.*/","yaxis":2},{"alias":"/.*drop.*/","yaxis":2},{"alias":"/.*bytes.*/","yaxis":1}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_bytes_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"recv bytes {{device}}","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_bytes_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"trans bytes {{device}} ","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_errs_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"recv errs {{device}} ","refId":"E","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_errs_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"trans err {{device}} ","refId":"F","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_drop_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"recv drop {{device}}","refId":"G","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_drop_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"trans drop {{device}} ","refId":"H","step":4}],"thresholds":[],"timeRegions":[],"title":"Network Traffic","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"pps","label":"","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{"io time":"#890F02"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":3,"description":"Need to fix https://github.com/grafana/grafana/issues/1271","fill":3,"fillGradient":0,"gridPos":{"h":13,"w":24,"x":0,"y":69},"hiddenSeries":false,"id":42,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*read*./","transform":"negative-Y"},{"alias":"/.*milliseconds*./","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_read_bytes_total{instance=~\"$node:.*\",device=~\"[a-z]*[a-z]\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"successfully read bytes {{device}}","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_written_bytes_total{instance=~\"$node:.*\",device=~\"[a-z]*[a-z]\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"successfully written bytes {{device}}","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_io_time_seconds_total{instance=~\"$node:.*\",device=~\"[a-z]*[a-z]\"} [5m])","hide":false,"intervalFactor":2,"legendFormat":"milliseconds spent doing I/Os {{device}}","refId":"C","step":4}],"thresholds":[],"timeRegions":[],"title":"I/O Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":false,"values":[]},"yaxes":[{"$$hashKey":"object:553","format":"bytes","logBase":1,"show":true},{"$$hashKey":"object:554","format":"s","label":"","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":3,"description":"Disk space used of all filesystems mounted","fill":1,"fillGradient":0,"gridPos":{"h":13,"w":24,"x":0,"y":82},"height":"","hiddenSeries":false,"id":69,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":false,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"100- ((node_filesystem_avail_bytes{instance=~\"$node:.*\",device!~'rootfs'} * 100) / node_filesystem_size_bytes{instance=~\"$node:.*\",device!~'rootfs'})","intervalFactor":2,"legendFormat":"{{mountpoint}}","refId":"A","step":4}],"thresholds":[],"timeRegions":[],"title":"Disk Space Used","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:937","format":"percent","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:938","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":95},"id":88,"panels":[{"aliasColors":{"Apps":"#629E51","Buffers":"#614D93","Cache":"#6D1F62","Cached":"#511749","Committed":"#508642","Free":"#0A437C","Harware Corrupted - Amount of RAM that the kernel identified as corrupted / not working":"#CFFAFF","Inactive":"#584477","PageTables":"#0A50A1","Page_Tables":"#0A50A1","RAM_Free":"#E0F9D7","Slab":"#806EB7","Slab_Cache":"#E0752D","Swap":"#BF1B00","Swap_Cache":"#C15C17","Swap_Free":"#2F575E","Unused":"#EAB839"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":24,"x":0,"y":96},"hiddenSeries":false,"id":79,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sideWidth":350,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Committed - *./","stack":false},{"alias":"/.*Mapped - *./","stack":false},{"alias":"/.*Active - *./","stack":false},{"alias":"/.*Inactive - *./","stack":false},{"alias":"/.*VmallocUsed - *./","stack":false},{"alias":"/.*Commit Limit - *./","stack":false},{"alias":"/.*Dirty - *./","stack":false},{"alias":"/.*Harware Corrupted - *./","stack":false},{"alias":"/.*Unevictable - *./","stack":false}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Committed_AS_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Committed - The amount of memory presently allocated on the system","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Mapped_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Mapped - Files which have been mmaped, such as libraries","refId":"H","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Active_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Active - Memory that has been used more recently and usually not reclaimed unless absolutely necessary","refId":"J","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Inactive_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Inactive - Memory which has been less recently used.  It is more eligible to be reclaimed for other purposes","refId":"K","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_VmallocUsed_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"VmallocUsed - Memory of used virtual address space","refId":"L","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_CommitLimit_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Commit Limit - Total amount of  memory currently available to be allocated on the system","refId":"M","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Dirty_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Dirty - Memory which is waiting to get written back to the disk","refId":"N","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_HardwareCorrupted_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Harware Corrupted - Amount of RAM that the kernel identified as corrupted / not working","refId":"O","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Unevictable_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Unevictable - Unevictable pages can't be swapped out for a variety of reasons","refId":"P","step":4}],"thresholds":[],"timeRegions":[],"title":"Memory Usage 0","tooltip":{"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:868","format":"bytes","label":"","logBase":1,"min":"0","show":true},{"$$hashKey":"object:869","format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"Active":"#99440A","Buffers":"#58140C","Cache":"#6D1F62","Cached":"#511749","Committed":"#508642","Dirty":"#6ED0E0","Free":"#B7DBAB","Inactive":"#EA6460","Mapped":"#052B51","PageTables":"#0A50A1","Page_Tables":"#0A50A1","Slab_Cache":"#EAB839","Swap":"#BF1B00","Swap_Cache":"#C15C17","Total":"#511749","Total RAM":"#052B51","Total RAM + Swap":"#052B51","Total Swap":"#614D93","VmallocUsed":"#EA6460"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":12,"x":0,"y":106},"hiddenSeries":false,"id":46,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_MemTotal_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Total RAM","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_MemTotal_bytes{instance=~\"$node:.*\"} + (node_memory_SwapTotal_bytes{instance=~\"$node:.*\"})","hide":true,"intervalFactor":2,"legendFormat":"Total RAM + Swap","refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Shmem_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Shared mem - Total memory used by shared memory (shmem) and tmpfs","refId":"I","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Writeback_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Writeback - Memory which is actively being written back to disk","refId":"J","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_WritebackTmp_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"WritebackTmp - Memory used by FUSE for temporary writeback buffers","refId":"K","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_NFS_Unstable_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"NFS Unstable - NFS pages sent to the server, but not yet commited to the storage","refId":"L","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Mlocked_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"MLocked - Pages locked to memory using the mlock() system call","refId":"M","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_SReclaimable_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"SReclaimable - Part of Slab, that might be reclaimed, such as caches","refId":"N","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_SUnreclaim_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"SUnreclaim - Part of Slab, that cannot be reclaimed on memory pressure","refId":"O","step":10}],"thresholds":[],"timeRegions":[],"title":"Memory Usage 1","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1042","format":"bytes","label":"GB","logBase":1,"show":true},{"$$hashKey":"object:1043","format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"Active":"#99440A","Buffers":"#58140C","Cache":"#6D1F62","Cached":"#511749","Committed":"#508642","Dirty":"#6ED0E0","Free":"#B7DBAB","Inactive":"#EA6460","Mapped":"#052B51","PageTables":"#0A50A1","Page_Tables":"#0A50A1","Slab_Cache":"#EAB839","Swap":"#BF1B00","Swap_Cache":"#C15C17","Total":"#511749","Total RAM":"#052B51","Total RAM + Swap":"#052B51","VmallocUsed":"#EA6460"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":12,"x":12,"y":106},"hiddenSeries":false,"id":47,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_MemTotal_bytes{instance=~\"$node:.*\"}","hide":true,"intervalFactor":2,"legendFormat":"Total RAM","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_MemTotal_bytes{instance=~\"$node:.*\"} + (node_memory_SwapTotal_bytes{instance=~\"$node:.*\"})","hide":true,"intervalFactor":2,"legendFormat":"Total RAM + Swap","refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_DirectMap1G_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"DirectMap1G - Amount of pages mapped as this size","refId":"J","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_DirectMap2M_bytes{instance=~\"$node:.*\"}","interval":"","intervalFactor":2,"legendFormat":"DirectMap2M - Amount of pages mapped as this size","refId":"K","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_DirectMap4k_bytes{instance=~\"$node:.*\"}","interval":"","intervalFactor":2,"legendFormat":"DirectMap4K  - Amount of pages mapped as this size","refId":"L","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_AnonHugePages_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Anon Huge Pages - Non-file backed huge pages mapped into userspace page tables","refId":"D","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_AnonPages_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Anon Pages - Non-file backed pages mapped into userspace page tables","refId":"G","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Active_anon_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Inactive Anon - Anonymous and swap cache on inactive LRU list, including tmpfs (shmem)","refId":"H","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Active_file_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Active File - File-backed memory on active LRU list","refId":"I","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Inactive_file_bytes{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Inactive File - File-backed memory on inactive LRU list","refId":"M","step":10}],"thresholds":[],"timeRegions":[],"title":"Memory Usage 2","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1111","format":"bytes","label":"GB","logBase":1,"show":true},{"$$hashKey":"object:1112","format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"Active":"#99440A","Buffers":"#58140C","Cache":"#6D1F62","Cached":"#511749","Committed":"#508642","Dirty":"#6ED0E0","Free":"#B7DBAB","Inactive":"#EA6460","Mapped":"#052B51","PageTables":"#0A50A1","Page_Tables":"#0A50A1","Slab_Cache":"#EAB839","Swap":"#BF1B00","Swap_Cache":"#C15C17","Total":"#511749","Total RAM":"#052B51","Total RAM + Swap":"#052B51","VmallocUsed":"#EA6460"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":8,"x":0,"y":116},"hiddenSeries":false,"id":70,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_VmallocChunk_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"VmallocChunk - Largest contiguous block of vmalloc area which is free","refId":"H","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_VmallocTotal_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"VmallocTotal - Total size of vmalloc memory area","refId":"I","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_VmallocUsed_bytes{instance=~\"$node:.*\"}","hide":false,"intervalFactor":2,"legendFormat":"VmallocUsed - Amount of vmalloc area which is used","refId":"O","step":20}],"thresholds":[],"timeRegions":[],"title":"Memory Usage Vmalloc","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1180","format":"bytes","label":"GB","logBase":1,"show":true},{"$$hashKey":"object:1181","format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":8,"x":8,"y":116},"hiddenSeries":false,"id":22,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*_out/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_vmstat_pswpin {instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"swap_in","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_vmstat_pswpout{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"swap_out","refId":"B","step":20}],"thresholds":[],"timeRegions":[],"title":"Swap in/out","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1249","format":"none","label":"pages per second in (+) / out (-)","logBase":1,"show":true},{"$$hashKey":"object:1250","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{"Active":"#99440A","Buffers":"#58140C","Cache":"#6D1F62","Cached":"#511749","Committed":"#508642","Dirty":"#6ED0E0","Free":"#B7DBAB","Inactive":"#EA6460","Mapped":"#052B51","PageTables":"#0A50A1","Page_Tables":"#0A50A1","Slab_Cache":"#EAB839","Swap":"#BF1B00","Swap_Cache":"#C15C17","Total":"#511749","Total RAM":"#806EB7","Total RAM + Swap":"#806EB7","VmallocUsed":"#EA6460"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":2,"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":8,"x":16,"y":116},"hiddenSeries":false,"id":71,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Number of huge pages.*/","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_HugePages_Free{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"HugePages Free - Number of huge pages in the pool that are not yet allocated","refId":"I","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_HugePages_Rsvd{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"HugePages Reserved - Number of huge pages for                 which a commitment to allocate from the pool has been made,                 but no allocation has yet been made","refId":"J","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_HugePages_Surp{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"HugePages Surp - Number of huge pages in                 the pool above the value in /proc/sys/vm/nr_hugepages","refId":"K","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_HugePages_Total{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"HugePages - Total size of the pool of huge pages","refId":"L","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_memory_Hugepagesize{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Hugepagesize - Huge Page size","refId":"D","step":20}],"thresholds":[],"timeRegions":[],"title":"Memory Usage HugePages","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","label":"GB","logBase":1,"show":true},{"format":"none","label":"","logBase":1,"show":false}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Memory Detail","type":"row"},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":96},"id":89,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":97},"hiddenSeries":false,"id":8,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","repeat":"node","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_context_switches_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"Context switches","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_intr_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"Interrupts","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_entropy_available_bits{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Entropy","refId":"C","step":4}],"thresholds":[],"timeRegions":[],"title":"Context Switches / Interrupts / Entropy","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1342","format":"short","logBase":1,"show":true},{"$$hashKey":"object:1343","format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":105},"hiddenSeries":false,"id":64,"legend":{"alignAsTable":false,"avg":false,"current":true,"max":false,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"process_max_fds{instance=~\"$node:.*\"}","interval":"","intervalFactor":2,"legendFormat":"Max file descriptors","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"process_open_fds{instance=~\"$node:.*\"}","interval":"","intervalFactor":2,"legendFormat":"Open file descriptors","refId":"B","step":10}],"thresholds":[],"timeRegions":[],"title":"File Descriptors","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":105},"hiddenSeries":false,"id":62,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*forks*./","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_procs_blocked{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Processes blocked waiting for I/O to complete","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_procs_running{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"Processes in runnable state","refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"increase(node_forks{instance=~\"$node:.*\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"Processes forks","refId":"C","step":10}],"thresholds":[],"timeRegions":[],"title":"Processes State / Forks","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":113},"hiddenSeries":false,"id":65,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"process_resident_memory_bytes{instance=~\"$node:.*\"}","interval":"","intervalFactor":2,"legendFormat":"Resident memory size in bytes","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"process_start_time_seconds{instance=~\"$node:.*\"}","interval":"","intervalFactor":2,"legendFormat":"Start time of the process since unix epoch in seconds","refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"process_virtual_memory_bytes{instance=~\"$node:.*\"}","interval":"","intervalFactor":2,"legendFormat":"Virtual memory size in bytes","refId":"C","step":10}],"thresholds":[],"timeRegions":[],"title":"Processes","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":113},"hiddenSeries":false,"id":7,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","repeat":"node","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_load1{instance=~\"$node:.*\"}","intervalFactor":4,"legendFormat":"Load 1m","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_load5{instance=~\"$node:.*\"}","intervalFactor":4,"legendFormat":"Load 5m","refId":"B","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_load15{instance=~\"$node:.*\"}","intervalFactor":4,"legendFormat":"Load 15m","refId":"C","step":20}],"thresholds":[],"timeRegions":[],"title":"System Load","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"System Detail","type":"row"},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":97},"id":90,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The total number of bytes read / write successfully.","fill":2,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":152},"hiddenSeries":false,"id":33,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*read.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_read_bytes_total{instance=~\"$node:.*\"}[5m])","intervalFactor":4,"legendFormat":"{{device}}_read","refId":"A","step":40},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_written_bytes_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"{{device}}_written","refId":"B","step":20}],"thresholds":[],"timeRegions":[],"title":"Disk Bytes R/W","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1431","format":"bytes","label":"read (-) / write (+)","logBase":1,"show":true},{"$$hashKey":"object:1432","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The total number of reads / writes completed successfully.","fill":2,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":160},"hiddenSeries":false,"id":9,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*read.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_reads_completed_total{instance=~\"$node:.*\"}[5m])","intervalFactor":4,"legendFormat":"{{device}}_read","refId":"A","step":40},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_writes_completed_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"{{device}}_write","refId":"B","step":20}],"thresholds":[],"timeRegions":[],"title":"Disk IOs per Device","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1504","format":"short","label":"IO/second read (-) / write (+)","logBase":1,"show":true},{"$$hashKey":"object:1505","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The weighted # of milliseconds spent doing I/Os. This field is incremented at each I/O start, I/O completion, I/O  merge, or read of these stats by the number of I/Os in progress times the number of milliseconds spent doing I/O since the last update of this field. This can provide an easy measure of both I/O completion time and the backlog that may be accumulating.","fill":3,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":168},"hiddenSeries":false,"id":35,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_io_time_weighted_seconds_total{instance=~\"$node:.*\"}[5m])","intervalFactor":4,"legendFormat":"{{device}}","refId":"A","step":60}],"thresholds":[],"timeRegions":[],"title":"Disk IOs weighted","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2012","format":"ms","label":"","logBase":1,"min":"0","show":true},{"$$hashKey":"object:2013","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The total number of milliseconds spent by all reads / writes.","fill":3,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":168},"hiddenSeries":false,"id":37,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*read.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_read_time_seconds_total{instance=~\"$node:.*\"}[5m])","hide":false,"intervalFactor":4,"legendFormat":"{{device}}_read","refId":"A","step":60},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_write_time_seconds_total{instance=~\"$node:.*\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"{{device}}_write","refId":"B","step":30}],"thresholds":[],"timeRegions":[],"title":"Disk R/W miliseconds","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2085","format":"s","label":"","logBase":1,"show":true},{"$$hashKey":"object:2086","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The number of I/Os currently in progress.","fill":3,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":176},"hiddenSeries":false,"id":34,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_io_now{instance=~\"$node:.*\"}[5m])","intervalFactor":4,"legendFormat":"{{device}}","refId":"A","step":60}],"thresholds":[],"timeRegions":[],"title":"Disk IOs current in progress","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2186","format":"short","label":"I/Os","logBase":1,"min":"0","show":true},{"$$hashKey":"object:2187","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"The total number of reads / writes completed successfully and the number of reads merged. See https://www.kernel.org/doc/Documentation/iostats.txt.","fill":2,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":176},"hiddenSeries":false,"id":38,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*read.*/","transform":"negative-Y"},{"alias":"/.*merged.*/","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_reads_completed_total{instance=~\"$node:.*\"}[5m])","hide":false,"intervalFactor":4,"legendFormat":"{{device}}_completed_read","refId":"A","step":60},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_writes_completed_total{instance=~\"$node:.*\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"{{device}}_completed_write","refId":"B","step":30},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_reads_merged_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"{{device}}_merged_read","refId":"C","step":30},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_writes_merged_total{instance=~\"$node:.*\"}[5m])","intervalFactor":2,"legendFormat":"{{device}}_merged_write","refId":"D","step":30}],"thresholds":[],"timeRegions":[],"title":"Disk R/W completed / Merged","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2259","format":"none","label":"","logBase":1,"show":true},{"$$hashKey":"object:2260","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Milliseconds spent doing I/Os.","fill":3,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":184},"hiddenSeries":false,"id":36,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_disk_io_time_seconds_total{instance=~\"$node:.*\"}[5m])","intervalFactor":4,"legendFormat":"{{device}}","refId":"A","step":60}],"thresholds":[],"timeRegions":[],"title":"Milliseconds spent doing I/Os","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2336","format":"s","label":"","logBase":1,"min":"0","show":true},{"$$hashKey":"object:2337","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"1 if there was an error opening or reading a file, 0 otherwise","fill":2,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":184},"hiddenSeries":false,"id":66,"legend":{"alignAsTable":false,"avg":false,"current":false,"hideZero":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_textfile_scrape_error{instance=~\"$node:.*\"}","intervalFactor":4,"legendFormat":"read error","refId":"A","step":60}],"thresholds":[],"timeRegions":[],"title":"Open error file","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","label":"","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Disk Detail","type":"row"},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":98},"id":91,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":3,"description":"Filesystem space available to non-root users in bytes. Filesystem free space in bytes. Filesystem read-only status. Filesystem size in bytes.","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":193},"hiddenSeries":false,"id":43,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_filesystem_avail_bytes{instance=~\"$node:.*\",device!~'rootfs'}","hide":false,"intervalFactor":2,"legendFormat":"{{mountpoint}} Available","metric":"","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_filesystem_free_bytes{instance=~\"$node:.*\",device!~'rootfs'}","hide":true,"intervalFactor":2,"legendFormat":"{{mountpoint}} Free","refId":"B","step":2},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_filesystem_size_bytes{instance=~\"$node:.*\",device!~'rootfs'}","hide":true,"intervalFactor":2,"legendFormat":"{{mountpoint}} Size","refId":"D","step":2}],"thresholds":[],"timeRegions":[],"title":"Filesystem space available","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2575","format":"bytes","logBase":1,"min":"0","show":true},{"$$hashKey":"object:2576","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"Filesystem total file nodes.","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":201},"hiddenSeries":false,"id":41,"legend":{"alignAsTable":true,"avg":false,"current":false,"hideZero":true,"max":true,"min":true,"rightSide":true,"show":true,"total":true,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_filesystem_files{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"{{device}}","refId":"A","step":4}],"thresholds":[],"timeRegions":[],"title":"File nodes","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"File descriptor statistics: allocated.","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":209},"hiddenSeries":false,"id":28,"legend":{"avg":false,"current":true,"max":false,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_filefd_maximum{instance=~\"$node:.*\"}","intervalFactor":4,"legendFormat":"max open files","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_filefd_allocated{instance=~\"$node:.*\"}","intervalFactor":2,"legendFormat":"open files","refId":"B","step":10}],"thresholds":[],"timeRegions":[],"title":"File descriptor","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{"/ ReadOnly":"#890F02"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"decimals":0,"description":"Filesystem read-only status.","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":209},"hiddenSeries":false,"id":44,"legend":{"alignAsTable":false,"avg":false,"current":false,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"maxPerRow":6,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_filesystem_readonly{instance=~\"$node:.*\",device!~'rootfs'}","intervalFactor":2,"legendFormat":"{{mountpoint}} ReadOnly","refId":"C","step":10}],"thresholds":[],"timeRegions":[],"title":"Filesystem in ReadOnly","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"","logBase":1,"max":"1","min":"0","show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Filesystem Detail","type":"row"},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":99},"id":92,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":194},"hiddenSeries":false,"id":58,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*trans.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_bytes_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"receive_bytes_{{device}}","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_bytes_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"transmit_bytes_{{device}}","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_compressed_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"receive_compressed_{{device}}","refId":"C","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_compressed_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"transmit_compressed_{{device}}","refId":"D","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_errs_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"receive_errs_{{device}}","refId":"E","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_errs_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"transmit_errs_{{device}}","refId":"F","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_drop_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"receive_drop_{{device}}","refId":"G","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_drop_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"transmit_drop_{{device}}","refId":"H","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_fifo_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"receive_fifo_{{device}}","refId":"I","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_fifo_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"transmit_fifo_{{device}}","refId":"J","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_frame_total{instance=~\"$node.*\"}[5m])","hide":true,"intervalFactor":2,"legendFormat":"receive_frame_{{device}}","refId":"K","step":30},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_frame_total{instance=~\"$node.*\"}[5m])","hide":true,"intervalFactor":2,"legendFormat":"transmit_frame_{{device}}","refId":"L","step":30},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_multicast_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"receive_multicast_{{device}}","refId":"M","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_multicast_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"transmit_multicast_{{device}}","refId":"N","step":4}],"thresholds":[],"timeRegions":[],"title":"Network traffic Detail","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2660","format":"bytes","logBase":1,"show":true},{"$$hashKey":"object:2661","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":201},"hiddenSeries":false,"id":60,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*trans.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_receive_packets_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"receive_packets_{{device}}","refId":"O","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_network_transmit_packets_total{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"transmit_packets_{{device}}","refId":"P","step":4}],"thresholds":[],"timeRegions":[],"title":"Network traffic Packets","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2753","format":"pps","logBase":1,"show":true},{"$$hashKey":"object:2754","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":208},"hiddenSeries":false,"id":61,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_nf_conntrack_entries{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"receive_packets_{{device}}","refId":"O","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_nf_conntrack_entries{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"transmit_packets_{{device}}","refId":"P","step":4}],"thresholds":[],"timeRegions":[],"title":"NF Contrack","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Network traffic Detail","type":"row"},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":100},"id":93,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":195},"hiddenSeries":false,"id":30,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_netstat_Tcp_CurrEstab{instance=~\"$node..*\"}","intervalFactor":2,"legendFormat":"established","refId":"A","step":4}],"thresholds":[],"timeRegions":[],"title":"Netstat TCP Established","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":202},"height":"","hiddenSeries":false,"id":51,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":12,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Out.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InBcastOctets{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InBcastOctets","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InBcastPkts{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InBcastPkts","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InCEPkts{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InCEPkts","refId":"C","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InCsumErrors{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InCsumErrors","refId":"D","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InECT0Pkts{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InECT0Pkts","refId":"E","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InECT1Pkts{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InECT1Pkt","refId":"F","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InMcastOctets{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InMcastOctets","refId":"G","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InMcastPkts{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InMcastPkts","refId":"H","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InNoECTPkts{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InNoECTPkts","refId":"I","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InNoRoutes{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InNoRoutes","refId":"J","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InOctets{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InOctets","refId":"K","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_InTruncatedPkts{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"InTruncatedPkts","refId":"L","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_OutBcastOctets{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"OutBcastOctets","refId":"M","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_OutBcastPkts{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"OutBcastPkts","refId":"N","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_OutMcastOctets{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"OutMcastOctets","refId":"O","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_OutMcastPkts{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"OutMcastPkts","refId":"P","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IpExt_OutOctets{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"OutOctets","refId":"Q","step":4}],"thresholds":[],"timeRegions":[],"title":"IP stats Extra","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"packets","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":209},"height":"","hiddenSeries":false,"id":81,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_DefaultTTL{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"DefaultTTL","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_ForwDatagrams{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"ForwDatagrams","refId":"C","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_Forwarding{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"Forwarding","refId":"D","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_FragCreates{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"FragCreates","refId":"E","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_FragFails{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"FragFails","refId":"F","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_FragOKs{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"FragOKs","refId":"G","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_ReasmFails{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"ReasmFails","refId":"Q","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_ReasmOKs{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"ReasmOKs","refId":"R","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_ReasmReqds{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"ReasmReqds","refId":"S","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Ip_ReasmTimeout{instance=~\"$node..*\"}[5m])","intervalFactor":2,"legendFormat":"ReasmTimeout","refId":"T","step":4}],"thresholds":[],"timeRegions":[],"title":"IP stats etc","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"packets","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":216},"hiddenSeries":false,"id":63,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_FRAG_inuse{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"FRAG_inuse","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_FRAG_memory{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"FRAG_memory","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_RAW_inuse{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"RAW_inuse","refId":"C","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_TCP_alloc{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"TCP_alloc","refId":"D","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_TCP_inuse{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"TCP_inuse","refId":"E","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_TCP_mem{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"TCP_mem","refId":"F","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_TCP_mem_bytes{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"TCP_mem_bytes","refId":"G","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_TCP_orphan{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"TCP_orphan","refId":"H","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_TCP_tw{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"TCP_tw","refId":"I","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_UDPLITE_inuse{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"UDPLITE_inuse","refId":"J","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_UDP_inuse{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"UDP_inuse","refId":"K","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_UDP_mem{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"UDP_mem","refId":"L","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_UDP_mem_bytes{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"UDP_mem_bytes","refId":"M","step":4},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"node_sockstat_sockets_used{instance=~\"$node.*\"}","intervalFactor":2,"legendFormat":"sockets_used","refId":"N","step":4}],"thresholds":[],"timeRegions":[],"title":"Sockstat","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"Sockets","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Network Netstat","type":"row"},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":101},"id":94,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":269},"height":"300px","hiddenSeries":false,"id":52,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":12,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Out.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_InCsumErrors{instance=~\"$node.*\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"InCsumErrors","refId":"E","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_InErrs{instance=~\"$node.*\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"InErrs","refId":"F","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_InSegs{instance=~\"$node.*\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"InSegs","refId":"G","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_OutRsts{instance=~\"$node.*\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"OutRsts","refId":"I","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_OutSegs{instance=~\"$node.*\"}[5m])","hide":false,"intervalFactor":2,"legendFormat":"OutSegs","refId":"J","step":20}],"thresholds":[],"timeRegions":[],"title":"TCP stats","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"packets","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":277},"height":"300px","hiddenSeries":false,"id":82,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":12,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_ActiveOpens{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"ActiveOpens","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_AttemptFails{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"AttemptFails","refId":"B","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_CurrEstab{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"CurrEstab","refId":"C","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_EstabResets{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"EstabResets","refId":"D","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_MaxConn{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"MaxConn","refId":"H","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_PassiveOpens{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"PassiveOpens","refId":"K","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_RetransSegs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"RetransSegs","refId":"L","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_RtoAlgorithm{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"RtoAlgorithm","refId":"M","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_RtoMax{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"RtoMax","refId":"N","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Tcp_RtoMin{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"RtoMin","refId":"O","step":20}],"thresholds":[],"timeRegions":[],"title":"TCP ext 1","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"packets","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":285},"height":"300px","hiddenSeries":false,"id":53,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":12,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_ArpFilter{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"ArpFilter","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_BusyPollRxPackets{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"BusyPollRxPackets","refId":"B","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_DelayedACKLocked{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"DelayedACKLocked","refId":"C","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_DelayedACKLost{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"DelayedACKLost","refId":"D","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_DelayedACKs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_DelayedACKs","refId":"E","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_EmbryonicRsts{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_EmbryonicRsts","refId":"F","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_IPReversePathFilter{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_IPReversePathFilter","refId":"G","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_ListenDrops{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_ListenDrops","refId":"H","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_ListenOverflows{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_ListenOverflows","refId":"I","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_LockDroppedIcmps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_LockDroppedIcmps","refId":"J","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_OfoPruned{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_OfoPruned","refId":"K","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_OutOfWindowIcmps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_OutOfWindowIcmps","refId":"L","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_PAWSActive{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_PAWSActive","refId":"M","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_PAWSEstab{instance=~'$node'}[5m])","intervalFactor":2,"legendFormat":"TcpExt_PAWSEstab","refId":"N","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_PAWSPassive{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_PAWSPassive","refId":"O","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_PruneCalled{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_PruneCalled","refId":"P","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_RcvPruned{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_RcvPruned","refId":"Q","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_SyncookiesFailed{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_SyncookiesFailed","refId":"R","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_SyncookiesRecv{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_SyncookiesRecv","refId":"S","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_SyncookiesSent{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_SyncookiesSent","refId":"T","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPAbortFailed{instance=~\"$node.*\"}[5m])","intervalFactor":2,"refId":"U","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPAbortOnClose{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPAbortOnClose","refId":"V","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPAbortOnData{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_TCPAbortOnData","refId":"W","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPAbortOnLinger{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPAbortOnLinger","refId":"X","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPAbortOnMemory{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPAbortOnMemory","refId":"Y","step":20}],"thresholds":[],"timeRegions":[],"title":"TCP ext 2","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"packets","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":293},"height":"300px","hiddenSeries":false,"id":54,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":12,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPTimeouts{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPAbortOnTimeout","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPAutoCorking{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_TCPAutoCorking","refId":"B","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPBacklogDrop{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPBacklogDrop","refId":"C","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPChallengeACK{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPChallengeACK","refId":"D","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDSACKIgnoredNoUndo{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPDSACKIgnoredNoUndo","refId":"E","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDSACKIgnoredOld{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPDSACKIgnoredOld","refId":"F","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDSACKOfoRecv{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPDSACKOfoRecv","refId":"G","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDSACKOfoSent{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPDSACKOfoSent","refId":"H","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDSACKOldSent{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TcpExt_TCPDSACKOldSent","refId":"I","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDSACKRecv{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPDSACKRecv","refId":"J","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDSACKUndo{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPDSACKUndo","refId":"K","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDeferAcceptDrop{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPDeferAcceptDrop","refId":"L","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDirectCopyFromBacklog{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPDirectCopyFromBacklog","refId":"M","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPDirectCopyFromPrequeue{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPDirectCopyFromPrequeue","refId":"N","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFACKReorder{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFACKReorder","refId":"O","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFastOpenActive{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFastOpenActive","refId":"P","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFastOpenActiveFail{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFastOpenActiveFail","refId":"Q","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFastOpenCookieReqd{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFastOpenCookieReqd","refId":"R","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFastOpenListenOverflow{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFastOpenListenOverflow","refId":"S","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFastOpenPassive{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFastOpenPassive","refId":"T","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFastOpenPassiveFail{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFastOpenPassiveFail","refId":"U","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFastRetrans{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFastRetrans","refId":"V","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPForwardRetrans{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPForwardRetrans","refId":"W","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFromZeroWindowAdv{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFromZeroWindowAdv","refId":"X","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPFullUndo{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPFullUndo","refId":"Y","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPHPAcks{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPHPAcks","refId":"Z","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPHPHits{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPHPHits","refId":"AA","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPHPHitsToUser{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPHPHitsToUser","refId":"AB","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPLossFailures{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPLossFailures","refId":"AC","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPLossProbeRecovery{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPLossProbeRecovery","refId":"AD","step":20}],"thresholds":[],"timeRegions":[],"title":"TCP ext 3","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3016","format":"none","label":"packets","logBase":1,"show":true},{"$$hashKey":"object:3017","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":301},"height":"300px","hiddenSeries":false,"id":56,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":12,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPSackRecovery{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPSackRecovery","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPSackRecoveryFail{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPSackRecoveryFail","refId":"B","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPSackShiftFallback{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPSackShiftFallback","refId":"C","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPSackShifted{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPSackShifted","refId":"D","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPSchedulerFailed{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPSchedulerFailed","refId":"E","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPSlowStartRetrans{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPSlowStartRetrans","refId":"F","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPSpuriousRTOs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPSpuriousRTOs","refId":"G","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPSpuriousRtxHostQueues{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPSpuriousRtxHostQueues","refId":"H","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPSynRetrans{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPSynRetrans","refId":"I","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPTSReorder{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPTSReorder","refId":"J","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPTimeWaitOverflow{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPTimeWaitOverflow","refId":"K","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPTimeouts{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPTimeouts","refId":"L","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPToZeroWindowAdv{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPToZeroWindowAdv","refId":"M","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TCPWantZeroWindowAdv{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TCPWantZeroWindowAdv","refId":"N","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TW{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TW","refId":"O","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TWKilled{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TWKilled","refId":"P","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_TcpExt_TWRecycled{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"TWRecycled","refId":"Q","step":20}],"thresholds":[],"timeRegions":[],"title":"TCP ext 4","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"packets","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Network Netstat TCP","type":"row"},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":102},"id":95,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":270},"height":"300px","hiddenSeries":false,"id":55,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":12,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Out.*/","transform":"negative-Y"},{"alias":"NoPorts","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Udp_InCsumErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InCsumErrors","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Udp_InDatagrams{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InDatagrams","refId":"B","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Udp_InErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InErrors","refId":"C","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Udp_NoPorts{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"NoPorts","refId":"D","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Udp_OutDatagrams{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutDatagrams","refId":"E","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Udp_RcvbufErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"RcvbufErrors","refId":"F","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Udp_SndbufErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"SndbufErrors","refId":"G","step":20}],"thresholds":[],"timeRegions":[],"title":"UDP","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"packets","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":278},"height":"300px","hiddenSeries":false,"id":57,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":12,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Out.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_UdpLite_InCsumErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InCsumErrors","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_UdpLite_InDatagrams{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InDatagrams","refId":"B","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_UdpLite_InErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InErrors","refId":"C","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_UdpLite_NoPorts{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"NoPorts","refId":"D","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_UdpLite_OutDatagrams{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutDatagrams","refId":"E","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_UdpLite_RcvbufErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"RcvbufErrors","refId":"F","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_UdpLite_SndbufErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"SndbufErrors","refId":"G","step":20}],"thresholds":[],"timeRegions":[],"title":"UDP Lite","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"packets","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":286},"height":"300px","hiddenSeries":false,"id":50,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"maxPerRow":12,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Out.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IcmpMsg_InType3{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InType3","refId":"A","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_IcmpMsg_OutType3{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutType3","refId":"B","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InAddrMaskReps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InAddrMaskReps","refId":"C","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InAddrMasks{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InAddrMasks","refId":"D","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InCsumErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InCsumErrors","refId":"E","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InDestUnreachs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InDestUnreachs","refId":"F","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InEchoReps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InEchoReps","refId":"G","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InEchos{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InEchos","refId":"H","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InErrors","refId":"I","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InMsgs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InMsgs","refId":"J","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InParmProbs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InParmProbs","refId":"K","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InRedirects{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InRedirects","refId":"L","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InSrcQuenchs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InSrcQuenchs","refId":"M","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InTimeExcds{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InTimeExcds","refId":"N","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InTimestampReps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InTimestampReps","refId":"O","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_InTimestamps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"InTimestamps","refId":"P","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutAddrMaskReps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutAddrMaskReps","refId":"Q","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutAddrMasks{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutAddrMasks","refId":"R","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutDestUnreachs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutDestUnreachs","refId":"S","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutEchoReps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutEchoReps","refId":"T","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutEchos{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"Icmp_OutEchos","refId":"U","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutErrors{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"Icmp_OutErrors","refId":"V","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutMsgs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"Icmp_OutMsgs","refId":"W","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutParmProbs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutParmProb","refId":"X","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutRedirects{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutRedirects{","refId":"Y","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutSrcQuenchs{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutSrcQuenchs","refId":"Z","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutTimeExcds{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutTimeExcds","refId":"AA","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutTimestampReps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutTimestampReps","refId":"AB","step":20},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_netstat_Icmp_OutTimestamps{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"OutTimestamps","refId":"AC","step":20}],"thresholds":[],"timeRegions":[],"title":"ICMP stats","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"packets","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Network Netstat UDP ICMP","type":"row"},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":103},"id":96,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"description":"node_exporter: Duration of a scrape job.","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":104},"hiddenSeries":false,"id":40,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.0.5","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"expr":"irate(node_scrape_collector_duration_seconds{instance=~\"$node.*\"}[5m])","intervalFactor":2,"legendFormat":"{{collector}}","refId":"A","step":20}],"thresholds":[],"timeRegions":[],"title":"Node Exporter scrape time","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:634","format":"s","logBase":1,"show":true},{"$$hashKey":"object:635","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Node Exporter","type":"row"}],"refresh":"1m","schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"description":"Prometheus","hide":0,"includeAll":false,"multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"current":{},"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"definition":"label_values(node_boot_time_seconds{job=\"node-exporter\"}, instance)","hide":0,"includeAll":false,"label":"Host:","multi":false,"name":"node","options":[],"query":{"query":"label_values(node_boot_time_seconds{job=\"node-exporter\"}, instance)","refId":"StandardVariableQuery"},"refresh":1,"regex":"/([^:]+):.*/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Node Exporter Full","uid":"kNn3XEZVk","version":2,"weekStart":""}
