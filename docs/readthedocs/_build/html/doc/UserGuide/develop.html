<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developer Guide &mdash; BigDL  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BigDL Known Issues" href="known_issues.html" />
    <link rel="prev" title="Databricks User Guide" href="databricks.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> BigDL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Orca/QuickStart/orca-tf-quickstart.html">TensorFlow 1.15 Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/QuickStart/orca-keras-quickstart.html">Keras 2.3 Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/QuickStart/orca-tf2keras-quickstart.html">TensorFlow 2 Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/QuickStart/orca-pytorch-quickstart.html">PyTorch Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ray/QuickStart/ray-quickstart.html">RayOnSpark Quickstart</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="python.html">Python User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="scala.html">Scala User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="colab.html">Colab User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="hadoop.html">Hadoop/YARN User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="k8s.html">K8s User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="databricks.html">Databricks User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#python"><strong>1. Python</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#build"><strong>1.1 Build</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#ide-setup"><strong>1.2 IDE Setup</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#terminal-setup"><strong>1.3 Terminal Setup</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scala"><strong>2. Scala</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1"><strong>2.1 Build</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2"><strong>2.2 IDE Setup</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="known_issues.html">BigDL Known Issues</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Nano</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Nano/Overview/nano.html">Nano User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nano/Overview/windows_guide.html">Windows User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nano/QuickStart/pytorch_train.html">BigDL-Nano PyTorch Training Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nano/QuickStart/pytorch_inference.html">BigDL-Nano PyTorch Inference Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nano/QuickStart/tensorflow_train.html">BigDL-Nano TensorFlow Training Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nano/QuickStart/tensorflow_inference.html">BigDL-Nano TensorFlow Inference Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nano/QuickStart/hpo.html">AutoML Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nano/Overview/known_issues.html">Nano Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nano/QuickStart/index.html">Nano Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DLlib</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../DLlib/Overview/dllib.html">DLlib User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DLlib/Overview/keras-api.html">Keras-Like API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DLlib/Overview/nnframes.html">Spark ML Pipeline Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Orca</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Orca/Overview/orca.html">Orca User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/Overview/orca-context.html">Orca Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/Overview/data-parallel-processing.html">Distributed Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/Overview/distributed-training-inference.html">Distributed Training and Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/Overview/distributed-tuning.html">Distributed Hyper-Parameter Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ray/Overview/ray.html">RayOnSpark</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/Overview/known_issues.html">Orca Known Issues</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Chronos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Chronos/Overview/chronos.html">Chronos User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chronos/Overview/deep_dive.html">Chronos Deep Dive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chronos/QuickStart/index.html">Chronos Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chronos/Overview/chronos_known_issue.html">Chronos Known Issue</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">PPML</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PPML/Overview/ppml.html">Privacy Preserving Machine Learning (PPML) User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PPML/Overview/trusted_big_data_analytics_and_ml.html">Trusted Big Data Analytics and ML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PPML/Overview/trusted_fl.html">Trusted FL (Federated Learning)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PPML/QuickStart/secure_your_services.html">Secure Your Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PPML/QuickStart/build_kernel_with_sgx.html">Building Linux Kernel from Source with SGX Enabled</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PPML/QuickStart/deploy_intel_sgx_device_plugin_for_kubernetes.html">Deploy the Intel SGX Device Plugin for Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PPML/QuickStart/trusted-serving-on-k8s-guide.html">Trusted Cluster Serving with Graphene on Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PPML/QuickStart/tpc-h_with_sparksql_on_k8s.html">TPC-H with Trusted SparkSQL on Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PPML/QuickStart/tpc-ds_with_sparksql_on_k8s.html">TPC-DS with Trusted SparkSQL on Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PPML/Overview/azure_ppml.html">Privacy Preserving Machine Learning (PPML) on Azure User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Serving</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Serving/Overview/serving.html">Cluster Serving User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Serving/QuickStart/serving-quickstart.html">Cluster Serving Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Serving/ProgrammingGuide/serving-installation.html">Install Cluster Serving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Serving/ProgrammingGuide/serving-start.html">Start Cluster Serving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Serving/ProgrammingGuide/serving-inference.html">Inference by Cluster Serving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Serving/Example/example.html">Cluster Serving Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Serving/FAQ/faq.html">Cluster Serving FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Serving/FAQ/contribute-guide.html">Contribute to Cluster Serving</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Use Case</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Orca/QuickStart/orca-pytorch-distributed-quickstart.html">Use <code class="docutils literal notranslate"><span class="pre">torch.distributed</span></code> in Orca</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UseCase/spark-dataframe.html">Use Spark Dataframe for Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UseCase/xshards-pandas.html">Use Distributed Pandas for Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/QuickStart/orca-autoestimator-pytorch-quickstart.html">Enable AutoML for PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Orca/QuickStart/orca-autoxgboost-quickstart.html">Use AutoXGBoost to auto-tune XGBoost parameters</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PythonAPI/Orca/orca.html">Orca API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonAPI/Friesian/feature.html">Friesian Feature API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonAPI/Chronos/index.html">Chronos API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonAPI/Nano/index.html">Nano API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Real-World Application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Application/presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Application/blogs.html">Blogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Application/powered-by.html">Powered By</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BigDL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Developer Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/doc/UserGuide/develop.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="developer-guide">
<h1>Developer Guide<a class="headerlink" href="#developer-guide" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<p>BigDL source code is available at <a class="reference external" href="https://github.com/intel-analytics/BigDL">GitHub</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/intel-analytics/BigDL.git
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> will download the development version of BigDL. If you want a release version, you can use the command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> to change the specified version.</p>
<section id="python">
<h2><strong>1. Python</strong><a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<section id="build">
<h3><strong>1.1 Build</strong><a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h3>
<p>To generate a new <a class="reference external" href="https://pythonwheels.com/">whl</a> package for pip install, you can run the following script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> BigDL/python/dev
bash release_default_linux_spark246.sh default <span class="nb">false</span> <span class="nb">false</span> <span class="nb">false</span>  <span class="c1"># build on Spark 2.4.6 for linux</span>
<span class="c1"># Use release_default_linux_spark312.sh to build on Spark 3.1.2 for linux</span>
<span class="c1"># Use release_default_mac_spark246.sh to build on Spark 2.4.6 for mac</span>
<span class="c1"># Use release_default_mac_spark312.sh to build on Spark 3.1.2 for mac</span>
</pre></div>
</div>
<p><strong>Arguments:</strong></p>
<ul class="simple">
<li><p>The first argument is the BigDL <strong>version</strong> to build for. ‘default’ means the default version (<code class="docutils literal notranslate"><span class="pre">BigDL/python/version.txt</span></code>) for the current branch. You can also specify a different version if you wish, e.g., ‘0.14.0.dev1’.</p></li>
<li><p>The second argument is whether to <strong>quick build</strong> BigDL Scala dependencies. You need to set it to be ‘true’ for the first build. In later builds, if you don’t make any changes in BigDL Scala, you can set it to be ‘false’ so that the Scala dependencies would not be re-built.</p></li>
<li><p>The third argument is whether to <strong>upload</strong> the packages to pypi. Set it to ‘false’ if you are simply developing BigDL for your own usage.</p></li>
<li><p>The fourth argument is whether to add <strong>spark suffix</strong> (i.e. -spark2 or -spark3) to BigDL package names. Just set this to be ‘false’ if you are simply developing BigDL for your own usage.</p></li>
<li><p>You can also add other Maven profiles to build the package (if any) after the fourth argument, for example ‘-Ddata-store-url=..’, etc.</p></li>
</ul>
<p>After running the above command, you will find a <code class="docutils literal notranslate"><span class="pre">whl</span></code> file for each submodule of BigDL and you can then directly pip install them to your local Python environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install bigdl-nano</span>
<span class="nb">cd</span> BigDL/python/nano/src/dist
pip install bigdl_nano-*.whl

<span class="c1"># Install bigdl-dllib</span>
<span class="nb">cd</span> BigDL/python/dllib/src/dist
pip install bigdl_dllib-*.whl

<span class="c1"># Install bigdl-orca, which depends on bigdl-dllib and you need to install bigdl-dllib first</span>
<span class="nb">cd</span> BigDL/python/orca/src/dist
pip install bigdl_orca-*.whl

<span class="c1"># Install bigdl-friesian, which depends on bigdl-orca and you need to install bigdl-dllib and bigdl-orca first</span>
<span class="nb">cd</span> BigDL/python/friesian/src/dist
pip install bigdl_friesian-*.whl

<span class="c1"># Install bigdl-chronos, which depends on bigdl-orca and bigdl-nano. You need to install bigdl-dllib, bigdl-orca and bigdl-nano first</span>
<span class="nb">cd</span> BigDL/python/chronos/src/dist
pip install bigdl_chronos-*.whl

<span class="c1"># Install bigdl-serving</span>
<span class="nb">cd</span> BigDL/python/serving/src/dist
pip install bigdl_serving-*.whl
</pre></div>
</div>
<p>See <a class="reference internal" href="python.html"><span class="doc">here</span></a> for more instructions to run BigDL after pip install.</p>
</section>
<section id="ide-setup">
<h3><strong>1.2 IDE Setup</strong><a class="headerlink" href="#ide-setup" title="Permalink to this headline">¶</a></h3>
<p>Any IDE that support Python should be able to run BigDL. PyCharm works fine for us.</p>
<p>You need to do the following preparations before starting the IDE to successfully run a BigDL Python program in the IDE:</p>
<ul class="simple">
<li><p>Build BigDL; see <a class="reference external" href="#build">here</a> for more instructions.</p></li>
<li><p>Prepare Spark environment by either setting <code class="docutils literal notranslate"><span class="pre">SPARK_HOME</span></code> as the environment variable or <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pyspark</span></code>. Note that the Spark version should match the one you build BigDL on.</p></li>
<li><p>Check the jars under <code class="docutils literal notranslate"><span class="pre">BigDL/dist/lib</span></code> and set the environment variable <code class="docutils literal notranslate"><span class="pre">BIGDL_CLASSPATH</span></code>. Modify SPARKVERSION and BIGDLVERSION(Scala) as appropriate:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">BIGDL_CLASSPATH</span><span class="o">=</span>BigDL/dist/lib/bigdl-dllib-spark_SPARKVERSION-BIGDLVERSION-jar-with-dependencies.jar:BigDL/dist/lib/bigdl-orca-spark_SPARKVERSION-BIGDLVERSION-jar-with-dependencies.jar:BigDL/dist/lib/bigdl-friesian-spark_SPARKVERSION-BIGDLVERSION-jar-with-dependencies.jar
</pre></div>
</div>
<ul class="simple">
<li><p>Configure BigDL source files to the Python interpreter:</p></li>
</ul>
<p>You can easily do this after launching PyCharm by right clicking the folder <code class="docutils literal notranslate"><span class="pre">BigDL/python/dllib/src</span></code> -&gt; <strong>Mark Directory As</strong> -&gt; <strong>Sources Root</strong> (also do this for <code class="docutils literal notranslate"><span class="pre">BigDL/python/nano/src</span></code>, <code class="docutils literal notranslate"><span class="pre">BigDL/python/orca/src</span></code>, <code class="docutils literal notranslate"><span class="pre">BigDL/python/friesian/src</span></code>, <code class="docutils literal notranslate"><span class="pre">BigDL/python/chronos/src</span></code>, <code class="docutils literal notranslate"><span class="pre">BigDL/python/serving/src</span></code> if necessary).</p>
<p>Alternatively, you can add BigDL source files to <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span>BigDL/python/dllib/src:BigDL/python/nano/src:BigDL/python/orca/src:BigDL/python/friesian/src:BigDL/python/chronos/src:BigDL/python/serving/src:<span class="nv">$PYTHONPATH</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">spark-bigdl.conf</span></code> to <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span>BigDL/python/dist/conf/spark-bigdl.conf:<span class="nv">$PYTHONPATH</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Install and add <code class="docutils literal notranslate"><span class="pre">tflibs</span></code> to <code class="docutils literal notranslate"><span class="pre">TF_LIBS_PATH</span></code>:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install bigdl-tf and bigdl-math</span>
pip install bigdl-tf bigdl-math

<span class="c1"># Configure TF_LIBS_PATH</span>
<span class="nb">export</span> <span class="nv">TF_LIBS_PATH</span><span class="o">=</span><span class="k">$(</span>python -c <span class="s1">&#39;import site; print(site.getsitepackages()[0])&#39;</span><span class="k">)</span>/bigdl/share/tflibs
</pre></div>
</div>
<p>The above environment variables should be available when running or debugging code in the IDE. When running applications in PyCharm, you can add runtime environment variables by clicking  <strong>Run</strong> -&gt; <strong>Edit Configurations</strong>; then in the <strong>Run/Debug Configurations</strong> panel, you can add necessary environment variables to your applications.</p>
</section>
<section id="terminal-setup">
<h3><strong>1.3 Terminal Setup</strong><a class="headerlink" href="#terminal-setup" title="Permalink to this headline">¶</a></h3>
<p>Besides setting the environment variables mentioned above manually for Linux users, we also provide a solution to set them with a script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install bigdl-tf and bigdl-math</span>
pip install bigdl-tf bigdl-math

<span class="nb">cd</span> BigDL/python/friesian
<span class="nb">source</span> dev/prepare_env.sh
</pre></div>
</div>
<p>You can verify the BigDL environment by running the following example.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python BigDL/python/dllib/examples/autograd/custom.py
</pre></div>
</div>
<p>Note that this approach will only work temporarily for this terminal.</p>
</section>
</section>
<section id="scala">
<h2><strong>2. Scala</strong><a class="headerlink" href="#scala" title="Permalink to this headline">¶</a></h2>
<section id="id1">
<h3><strong>2.1 Build</strong><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Maven 3 is needed to build BigDL, you can download it from the <a class="reference external" href="https://maven.apache.org/download.cgi">maven website</a>.</p>
<p>After installing Maven 3, please set the environment variable MAVEN_OPTS as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">MAVEN_OPTS</span><span class="o">=</span><span class="s2">&quot;-Xmx2g -XX:ReservedCodeCacheSize=512m&quot;</span>
</pre></div>
</div>
<p><strong>Build using <code class="docutils literal notranslate"><span class="pre">make-dist.sh</span></code></strong></p>
<p>It is highly recommended that you build BigDL using the <a class="reference external" href="https://github.com/intel-analytics/BigDL/blob/branch-2.0/scala/make-dist.sh">make-dist.sh script</a> with <strong>Java 8</strong>.</p>
<p>You can build BigDL with the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> scala
$ bash make-dist.sh
</pre></div>
</div>
<p>After that, you can find a <code class="docutils literal notranslate"><span class="pre">dist</span></code> folder, which contains all the needed files to run a BigDL program. The files in <code class="docutils literal notranslate"><span class="pre">dist</span></code> include:</p>
<ul class="simple">
<li><p><strong>dist/lib/bigdl-VERSION-jar-with-dependencies.jar</strong>: This jar package contains all dependencies except Spark classes.</p></li>
<li><p><strong>dist/lib/bigdl-VERSION-python-api.zip</strong>: This zip package contains all Python files of BigDL.</p></li>
</ul>
<p>The instructions above will build BigDL with Spark 2.4.6. To build with other spark versions, for example building analytics-zoo with spark 2.2.0, you can use <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">make-dist.sh</span> <span class="pre">-Dspark.version=2.2.0</span></code>.</p>
<p><strong>Build with JDK 11</strong></p>
<p>Spark starts to supports JDK 11 and Scala 2.12 at Spark 3.0. You can use <code class="docutils literal notranslate"><span class="pre">-P</span> <span class="pre">spark_3.x</span></code> to specify Spark3 and scala 2.12. Additionally, <code class="docutils literal notranslate"><span class="pre">make-dist.sh</span></code> default uses Java 8. To compile with Java 11, it is required to specify building opts <code class="docutils literal notranslate"><span class="pre">-Djava.version=11</span> <span class="pre">-Djavac.version=11</span></code>. You can build with <code class="docutils literal notranslate"><span class="pre">make-dist.sh</span></code>.</p>
<p>It’s recommended to download <a class="reference external" href="https://www.oracle.com/java/technologies/javase-jdk11-downloads.html">Oracle JDK 11</a>. This will avoid possible incompatibilities with maven plugins. You should update <code class="docutils literal notranslate"><span class="pre">PATH</span></code> and make sure your <code class="docutils literal notranslate"><span class="pre">JAVA_HOME</span></code> environment variable is set to Java 11 if you’re running from the command line. If you’re running from an IDE, you need to make sure it is set to run maven with your current JDK.</p>
<p>Build with <code class="docutils literal notranslate"><span class="pre">make-dist.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ bash make-dist.sh -P spark_3.x -Djava.version<span class="o">=</span><span class="m">11</span> -Djavac.version<span class="o">=</span><span class="m">11</span>
</pre></div>
</div>
</section>
<section id="id2">
<h3><strong>2.2 IDE Setup</strong><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>BigDL uses maven to organize project. You should choose an IDE that supports Maven project and scala language. IntelliJ IDEA works fine for us.</p>
<p>In IntelliJ, you can open BigDL project root directly, and the IDE will import the project automatically. If not imported automatically, right click <code class="docutils literal notranslate"><span class="pre">scala/pom.xml</span></code> and choose <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">as</span> <span class="pre">Maven</span> <span class="pre">Project</span></code>.</p>
<p>We set the scopes of spark related libraries to <code class="docutils literal notranslate"><span class="pre">provided</span></code> in the maven pom.xml, which, however, will cause a problem in IDE  (throwing <code class="docutils literal notranslate"><span class="pre">NoClassDefFoundError</span></code> when you run applications). You can easily change the scopes using the <code class="docutils literal notranslate"><span class="pre">all-in-one</span></code> profile.</p>
<ul class="simple">
<li><p>In Intellij, go to View -&gt; Tools Windows -&gt; Maven Projects. Then in the Maven Projects panel, Profiles -&gt; click “all-in-one”.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="databricks.html" class="btn btn-neutral float-left" title="Databricks User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="known_issues.html" class="btn btn-neutral float-right" title="BigDL Known Issues" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, BigDL Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>